(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{6447:function(e,n,r){"use strict";var a=r(3366),s=r(7462),t=r(7294),o=r(5408),i=r(8700),c=r(9707),l=r(9766),u=r(948),_=r(1657),d=r(5893);let m=["component","direction","spacing","divider","children"],p=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],x=({ownerState:e,theme:n})=>{let r=(0,s.Z)({display:"flex",flexDirection:"column"},(0,o.k9)({theme:n},(0,o.P$)({values:e.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let a=(0,i.hB)(n),s=Object.keys(n.breakpoints.values).reduce((n,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(n[r]=!0),n),{}),t=(0,o.P$)({values:e.direction,base:s}),c=(0,o.P$)({values:e.spacing,base:s});"object"==typeof t&&Object.keys(t).forEach((e,n,r)=>{let a=t[e];if(!a){let a=n>0?t[r[n-1]]:"column";t[e]=a}});let u=(n,r)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${p(r?t[r]:e.direction)}`]:(0,i.NA)(a,n)}});r=(0,l.Z)(r,(0,o.k9)({theme:n},c,u))}return(0,o.dt)(n.breakpoints,r)},f=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,n)=>[n.root]})(x),h=t.forwardRef(function(e,n){let r=(0,_.Z)({props:e,name:"MuiStack"}),o=(0,c.Z)(r),{component:i="div",direction:l="column",spacing:u=0,divider:p,children:x}=o,h=(0,a.Z)(o,m);return(0,d.jsx)(f,(0,s.Z)({as:i,ownerState:{direction:l,spacing:u},ref:n},h,{children:p?function(e,n){let r=t.Children.toArray(e).filter(Boolean);return r.reduce((e,a,s)=>(e.push(a),s<r.length-1&&e.push(t.cloneElement(n,{key:`separator-${s}`})),e),[])}(x,p):x}))});n.Z=h},134:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return r(3600)}])},3600:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return eu}});var a,s,t,o,i,c,l,u,_,d,m=r(5893),p=r(2720),x=r(5409),f=r(7433),h=r(7294),w=r(1163),g=r(7357),C=r(4184),v=r.n(C),N=r(8617),j=r(6322),y=r(5968),G=r(5861),Z=r(6041),k=r(844),P=r.n(k);function E(e){var n=e.reason;return(0,m.jsx)(g.Z,{"data-reason":n||null,className:v()(P().container,P().Empty),children:Z.Z.build.isDev&&n&&(0,m.jsxs)(G.Z,{children:["GameBlock Empty: ",n]})})}var R=r(851),B=r.n(R),S=r(8562),W=r.n(S);function q(e){var n=e.reason;return(0,m.jsx)(g.Z,{"data-reason":n||null,className:v()(W().container,W().Empty),children:Z.Z.build.isDev&&n&&(0,m.jsxs)(G.Z,{children:["GamePlaying Empty: ",n]})})}var b=r(6447),L=r(7189),A=r.n(L);function T(e){var n=e.className,r=e.self,a=e.name,s=e.questionAnswers,t=(0,j.UV)(),o=h.useMemo(function(){return t&&t.length?t.map(function(e,n){var a=e.id,t=a||"Q-"+n,o=s&&s[a],i=o&&"correct"===o,c=o&&"wrong"===o,l=v()(A().question,(i||c)&&!r&&A().questionFinished,i&&r&&A().questionCorrect,c&&r&&A().questionWrong);return(0,m.jsx)(g.Z,{id:t,className:l},t)}):null},[t,s,r]);return(0,m.jsx)(g.Z,{className:v()(n,A().container,A()[r?"self":"other"]),children:(0,m.jsxs)(g.Z,{className:v()(A().partner),children:[(0,m.jsx)(G.Z,{className:v()(A().name),textAlign:"left",gutterBottom:!0,children:a}),o&&(0,m.jsx)(b.Z,{className:v()(A().questionsBox),flexDirection:"row",flexWrap:"wrap",gap:"6px",children:o})]})})}var Q=r(8122),D=r(7925),U=r(2033),M=r.n(U);function Y(e){var n=e.className,r=(0,j.TL)(),a=(0,w.useRouter)(),s=(0,j.YH)(),t=(0,j.Nc)();h.useEffect(function(){t&&a.push("/results")},[t,a]);var o=(0,j.XK)(),i=(0,j.jw)(),c=void 0!=i,l=void 0!==o,u=(0,j.UV)(),_=(null==u?void 0:u.length)||0,d=(0,j.XT)(),p=d||0,x=p+1,f=x===_,C=u&&u[p],N=null==C?void 0:C.id,Z=null==C?void 0:C.question,k=null==C?void 0:C.answers,P=c&&Array.isArray(k)&&k[i]||void 0,E=null==P?void 0:P.id,R=String(Math.round(100*(_&&x/_)))+"%",B=h.useCallback(function(e){var n=Number(e.currentTarget.dataset.answer);r(D.Nw.setCurrentAnswerIdx(n))},[r]),S=h.useMemo(function(){return k&&k.length?k.map(function(e,n){var r=e.text,a="A-"+n,t=!s&&!l,u=n===i,_=l&&u,d=v()(M().answer,t&&M().answerActive,t&&c&&u&&M().answerChecked,_&&!!o&&M().answerCorrect,_&&!o&&M().answerWrong,s&&u&&M().answerLoading);return(0,m.jsx)(g.Z,{id:a,"data-answer":String(n),className:d,onClick:t?B:void 0,children:(0,m.jsx)(G.Z,{className:v()(M().answerText),textAlign:"left",children:r})},a)}):null},[k,s,l,i,c,o,B]),W=h.useCallback(function(){r((0,y.qr)()),(0,j.Io)(),a.push("/")},[a,r]),q=h.useCallback(function(){if(!N||!E){var e=Error("Answer params is undefined");throw console.error("[QuestionsCard]: checkAnswers: error",{error:e,questionId:N,answerId:E}),e}r((0,y.cR)({questionId:N,answerId:E}))},[N,E,r]),L=h.useCallback(function(){r((0,y.iR)({questionIdx:p+1})).then(function(e){var n=e.payload.questionIdx;return r(D.Nw.setCurrentQuestionIdx(n))})},[r,p]),A=h.useCallback(function(){r(D.Nw.resetQuestionAndAnswer()),r((0,y.Pm)()),r(D.Nw.setCurrentQuestionIdx(0)),a.push("/results")},[r,a]);return void 0!=d?(0,m.jsxs)(b.Z,{className:v()(n,M().container),children:[(0,m.jsxs)(b.Z,{className:v()(M().infoRow),flexDirection:"row",my:1,children:[(0,m.jsxs)(G.Z,{textAlign:"left",children:["Вопрос ",x]}),(0,m.jsxs)(G.Z,{textAlign:"right",flex:1,children:["из ",_]})]}),(0,m.jsx)(g.Z,{className:v()(M().progressRow),children:(0,m.jsx)(g.Z,{className:v()(M().progressBar),sx:{width:R}})}),(0,m.jsx)(g.Z,{className:v()(M().questionRow),my:1,mt:2,children:(0,m.jsx)(G.Z,{variant:"h5",children:Z})}),(0,m.jsx)(g.Z,{className:v()(M().answersRow,s&&M().answersLoading),my:1,children:S}),(0,m.jsxs)(b.Z,{className:v()(M().actionsRow),my:2,flexDirection:"row",gap:1,flexWrap:"wrap",children:[(0,m.jsx)(Q.Z,{className:"FixMuiButton",variant:"contained",disabled:!c||s,onClick:l?f?A:L:q,children:(0,m.jsx)("span",{className:"Text",children:l?f?"Завершить":"Следующий вопрос":"Проверить"})}),(0,m.jsx)(Q.Z,{className:"FixMuiButton",variant:"outlined",onClick:W,children:(0,m.jsx)("span",{className:"Text",children:"Отказаться от игры"})})]})]}):null}var K=r(8736),F=r.n(K);function I(e){var n=e.className,r=(0,j.u9)(),a=(0,j.JL)(),s=h.useMemo(function(){var e=a&&Object.keys(a);return e&&e.length?(r&&e.length>1?e.filter(function(e){return e!==r}).concat(r):e).map(function(e){var n=a[e],s=n.name,t=n.questionAnswers;return(0,m.jsx)(T,{self:e===r,token:e,questionAnswers:t,name:s},e)}):null},[a,r]);return(0,m.jsxs)(g.Z,{className:v()(n,F().container),children:[(0,m.jsxs)(b.Z,{className:v()(F().partnersBox),gap:2,children:[(0,m.jsx)(G.Z,{className:v()(F().partnersTitle),variant:"h6",textAlign:"left",children:"Участники"}),s]}),(0,m.jsx)(g.Z,{className:v()(F().gameBox),children:(0,m.jsx)(Y,{className:v()(F().gameBox)})})]})}var O=r(4254),V=r.n(O);function z(e){var n=e.className,r=(0,w.useRouter)(),a=(0,j.u9)(),s=(0,j.gC)(),t=(0,j.aR)(),o=(0,j.po)(),i=(0,j.RP)(),c=(0,j.iT)(),l=(0,j.dn)(),u=(0,j.UV)(),_=!!(u&&u.length),d=!!(a&&s&&o&&l&&_&&("multi"!==t||c));h.useEffect(function(){d||r.push("/waiting")},[r,d]);var p=h.useMemo(function(){return d?i?(0,m.jsx)(I,{}):(0,m.jsx)(q,{reason:"Unknown"}):(0,m.jsx)(q,{reason:"Not ready"})},[d,i]);return(0,m.jsx)(g.Z,{className:v()(n,V().container),children:p})}var X=r(8356),H=r(1799),J=r(9396),$=r(3005),ee=r(2171),en=r(542),er=r.n(en),ea=r(5713),es=r.n(ea);(0,X.qC)((s=(a={errorClassName:es().error,wrapperClassName:es().wrapper}).wrapperClassName,t=a.errorClassName,i=void 0===(o=a.showErrorInWrapper)||o,function(e){return function(n){var r=(0,$.tP)(),a=(0,$.lO)(),o=(0,$.YH)(),c=(0,$.X4)()||a;h.useEffect(function(){c&&x.Am.error((0,ee.VK)(c))},[c]);var l=(0,$.Nc)(),u=(0,$.RP)(),_=(0,w.useRouter)(),d=h.useCallback(function(){_.push("/")},[_]);return(0,m.jsxs)("div",{className:v()(s,er().container),children:[i&&c&&(0,m.jsxs)(g.Z,{className:v()(er().contentErrorContainer),m:2,children:[(0,m.jsx)(G.Z,{className:v()(t,er().contentError),m:2,children:(0,ee.VK)(c)}),(0,m.jsx)(b.Z,{className:er().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,m.jsx)(Q.Z,{className:"FixMuiButton",onClick:d,variant:"contained",children:(0,m.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!r&&(0,m.jsx)("div",{className:er().contentContainer,children:(0,m.jsx)(e,(0,J.Z)((0,H.Z)({},n),{error:c,isLoading:o,isFinished:l,isPlaying:u}))}),(0,m.jsx)(x.uY,{className:er().smallLoader,spinnerSize:"medium",show:o&&u}),(0,m.jsx)(x.uY,{className:er().loaderSplash,show:o&&!u,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(z);var et=r(7485),eo=r.n(et),ei=r(5303),ec=r.n(ei),el=(0,X.qC)((l=(c={errorClassName:ec().error,wrapperClassName:ec().wrapper}).wrapperClassName,u=c.errorClassName,d=void 0===(_=c.showErrorInWrapper)||_,function(e){return function(n){var r=(0,$.$P)(),a=(0,$.tP)(),s=(0,$.lO)(),t=(0,$.YH)(),o=(0,$.X4)(),i=(0,$.Vh)(),c=(0,$.QT)(),_=r||a||t||i,p=o||s||c;h.useEffect(function(){p&&x.Am.error((0,ee.VK)(p))},[p]);var f=(0,$.Nc)(),C=(0,$.RP)(),N=(0,w.useRouter)(),j=h.useCallback(function(){N.push("/")},[N]);return(0,m.jsxs)("div",{className:v()(l,eo().container),children:[d&&p&&(0,m.jsxs)(g.Z,{className:v()(eo().contentErrorContainer),m:2,children:[(0,m.jsx)(G.Z,{className:v()(u,eo().contentError),m:2,children:(0,ee.VK)(p)}),(0,m.jsx)(b.Z,{className:eo().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,m.jsx)(Q.Z,{className:"FixMuiButton",onClick:j,variant:"contained",children:(0,m.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!a&&(0,m.jsx)(g.Z,{className:eo().contentContainer,children:(0,m.jsx)(e,(0,J.Z)((0,H.Z)({},n),{error:p,isLoading:_,gameSessionIsFinished:f,gameSessionIsPlaying:C}))}),(0,m.jsx)(x.uY,{className:eo().smallLoader,spinnerSize:"medium",show:_&&C}),(0,m.jsx)(x.uY,{className:eo().loaderSplash,show:_&&!C,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(e){var n=e.className,r=(0,j.TL)(),a=(0,w.useRouter)(),s=(0,j.u9)(),t=(0,j.gC)(),o=(0,j.aR)(),i=(0,j.po)(),c=(0,j.RP)(),l=(0,j.Nc)(),u=(0,j.iT)(),_=(0,j.dn)(),d=(0,j.UV)(),p=!!(s&&t&&i),x=!!(p&&_&&d&&("multi"!==o||u));h.useEffect(function(){p&&r((0,N.P)())},[p,r]),h.useEffect(function(){!p||x||l||c||r((0,y.fZ)())},[p,x,l,c,r]),h.useEffect(function(){p||a.push("/waiting")},[a,p]);var f=h.useMemo(function(){return x?c?(0,m.jsx)(z,{}):(0,m.jsx)(E,{reason:"Unknown"}):(0,m.jsx)(E,{reason:"Not ready"})},[x,c]);return(0,m.jsx)(g.Z,{className:v()(n,B().container),my:2,flexDirection:"row",children:f})}),eu=function(){var e=(0,f.d)("Игра");return(0,m.jsx)(p.Z,{title:e,children:(0,m.jsx)(x.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,m.jsx)(el,{})})})}},8736:function(e){e.exports={container:"GameLayout_container__a9RxR",box:"GameLayout_box__2JorJ",partnersBox:"GameLayout_partnersBox__sKL6r",gameBox:"GameLayout_gameBox__YQH2L",DEBUG:"GameLayout_DEBUG__44p6d"}},4254:function(e){e.exports={container:"GamePlaying_container__8SLk7"}},8562:function(e){e.exports={container:"GamePlayingContent_container__aSnwj",Empty:"GamePlayingContent_Empty__U0pPk",WaitingMulti:"GamePlayingContent_WaitingMulti__UKIn8",WaitingSingle:"GamePlayingContent_WaitingSingle__ofYKC",WaitingFailed:"GamePlayingContent_WaitingFailed__eTXf9",WasCancelled:"GamePlayingContent_WasCancelled__MfhlT",GameReady:"GamePlayingContent_GameReady__lOmat",WaitingStart:"GamePlayingContent_WaitingStart__YaWyM",DEBUG:"GamePlayingContent_DEBUG__wFybG",error:"GamePlayingContent_error__nWi_M",actions:"GamePlayingContent_actions__fvFCS"}},5713:function(e){e.exports={error:"WrappedGamePlaying_error__X2EPd",wrapper:"WrappedGamePlaying_wrapper__YSwgS"}},7189:function(e){e.exports={container:"Partner_container__rAS5t",self:"Partner_self__592Ry",other:"Partner_other__3_ouq",question:"Partner_question__LRcnT",questionsBox:"Partner_questionsBox__AV0_v",DEBUG:"Partner_DEBUG__Lv99n",questionCorrect:"Partner_questionCorrect__NKwdH",questionWrong:"Partner_questionWrong__qKUbS",questionFinished:"Partner_questionFinished__JvMSe"}},2033:function(e){e.exports={container:"QuestionsCard_container__2lWSZ",infoRow:"QuestionsCard_infoRow__vSNhD",progressRow:"QuestionsCard_progressRow__Y7G4Y",questionRow:"QuestionsCard_questionRow__xKYGg",answersRow:"QuestionsCard_answersRow__mg5yR",actionsRow:"QuestionsCard_actionsRow__Yqp0R",DEBUG:"QuestionsCard_DEBUG__E8uoT",progressBar:"QuestionsCard_progressBar__aZZ3b",answersLoading:"QuestionsCard_answersLoading__FvUcC",answer:"QuestionsCard_answer__33R_Y",answerText:"QuestionsCard_answerText__heme_",answerCorrect:"QuestionsCard_answerCorrect__4JKNB",answerWrong:"QuestionsCard_answerWrong__9_LCO",answerChecked:"QuestionsCard_answerChecked__Zvpm4",answerLoading:"QuestionsCard_answerLoading__GaQ1G",answerActive:"QuestionsCard_answerActive__OKuD6"}},851:function(e){e.exports={container:"GameBlock_container__6ajde"}},844:function(e){e.exports={container:"GameBlockContent_container__x3Jwv",Empty:"GameBlockContent_Empty__Kfu40",GameReady:"GameBlockContent_GameReady__jV5t8",DEBUG:"GameBlockContent_DEBUG__vBGKd",error:"GameBlockContent_error__fsdHU",actions:"GameBlockContent_actions__ohim0"}},5303:function(e){e.exports={error:"WrappedGameBlock_error__6n7kx",wrapper:"WrappedGameBlock_wrapper__KbOID"}},7485:function(e){e.exports={container:"GamePlayingWrapper_container__c_kTA",contentError:"GamePlayingWrapper_contentError__dhYPs",contentContainer:"GamePlayingWrapper_contentContainer__xlavK",smallLoader:"GamePlayingWrapper_smallLoader__mYf3r",loaderSplash:"GamePlayingWrapper_loaderSplash__qFtCz"}},542:function(e){e.exports={container:"GameSessionWrapper_container__aDk9O",contentError:"GameSessionWrapper_contentError__ATjRz",contentContainer:"GameSessionWrapper_contentContainer__9ZWe_",smallLoader:"GameSessionWrapper_smallLoader__MetXT",loaderSplash:"GameSessionWrapper_loaderSplash__61cgZ"}}},function(e){e.O(0,[911,259,390,674,774,888,179],function(){return e(e.s=134)}),_N_E=e.O()}]);
//# sourceMappingURL=game-52892c64dd7b81e1.js.map