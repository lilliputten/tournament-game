(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{134:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return r(3600)}])},3600:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return eu}});var a,s,t,o,i,c,l,u,_,d,m=r(5893),p=r(2720),x=r(5409),f=r(7433),w=r(7294),h=r(1163),g=r(7357),C=r(4184),N=r.n(C),j=r(8617),v=r(6649),G=r(5968),y=r(5861),Z=r(6041),P=r(844),k=r.n(P);function E(e){var n=e.reason;return(0,m.jsx)(g.Z,{"data-reason":n||null,className:N()(k().container,k().Empty),children:Z.Z.build.isDev&&n&&(0,m.jsxs)(y.Z,{children:["GameBlock Empty: ",n]})})}var B=r(851),R=r.n(B),W=r(8562),S=r.n(W);function q(e){var n=e.reason;return(0,m.jsx)(g.Z,{"data-reason":n||null,className:N()(S().container,S().Empty),children:Z.Z.build.isDev&&n&&(0,m.jsxs)(y.Z,{children:["GamePlaying Empty: ",n]})})}var L=r(4254),A=r.n(L),Q=r(6447),T=r(7189),b=r.n(T);function D(e){var n=e.className,r=e.self,a=e.name,s=e.questionAnswers,t=(0,v.k5)(),o=w.useMemo(function(){return t&&t.length?t.map(function(e,n){var a=e.id,t=a||"Q-"+n,o=s&&s[a],i=o&&"correct"===o,c=o&&"wrong"===o,l=N()(b().question,(i||c)&&!r&&b().questionFinished,i&&r&&b().questionCorrect,c&&r&&b().questionWrong);return(0,m.jsx)(g.Z,{id:t,className:l},t)}):null},[t,s,r]);return(0,m.jsx)(g.Z,{className:N()(n,b().container,b()[r?"self":"other"]),children:(0,m.jsxs)(g.Z,{className:N()(b().partner),children:[(0,m.jsx)(y.Z,{className:N()(b().name),textAlign:"left",gutterBottom:!0,children:a}),o&&(0,m.jsx)(Q.Z,{className:N()(b().questionsBox),flexDirection:"row",flexWrap:"wrap",gap:"6px",children:o})]})})}var Y=r(8122),K=r(7925),M=r(2033),U=r.n(M);function F(e){var n=e.className,r=(0,v.TL)(),a=(0,h.useRouter)(),s=(0,v.YH)(),t=(0,v.Nc)();w.useEffect(function(){t&&a.push("/results")},[t,a]);var o=(0,v.XK)(),i=(0,v.jw)(),c=void 0!=i,l=void 0!==o,u=(0,v.k5)(),_=(null==u?void 0:u.length)||0,d=(0,v.XT)(),p=d||0,x=p+1,f=x===_,C=u&&u[p],j=null==C?void 0:C.id,Z=null==C?void 0:C.question,P=null==C?void 0:C.answers,k=c&&Array.isArray(P)&&P[i]||void 0,E=null==k?void 0:k.id,B=String(Math.round(100*(_&&x/_)))+"%",R=w.useCallback(function(e){var n=Number(e.currentTarget.dataset.answer);r(K.Nw.setCurrentAnswerIdx(n))},[r]),W=w.useMemo(function(){return P&&P.length?P.map(function(e,n){var r=e.text,a="A-"+n,t=!s&&!l,u=n===i,_=l&&u,d=N()(U().answer,t&&U().answerActive,t&&c&&u&&U().answerChecked,_&&!!o&&U().answerCorrect,_&&!o&&U().answerWrong,s&&u&&U().answerLoading);return(0,m.jsx)(g.Z,{id:a,"data-answer":String(n),className:d,onClick:t?R:void 0,children:(0,m.jsx)(y.Z,{className:N()(U().answerText),textAlign:"left",children:r})},a)}):null},[P,s,l,i,c,o,R]),S=w.useCallback(function(){r((0,G.qr)()),(0,v.Io)(),a.push("/")},[a,r]),q=w.useCallback(function(){if(!j||!E){var e=Error("Answer params is undefined");throw console.error("[QuestionsCard]: checkAnswers: error",{error:e,questionId:j,answerId:E}),e}r((0,G.cR)({questionId:j,answerId:E}))},[j,E,r]),L=w.useCallback(function(){r((0,G.iR)({questionIdx:p+1})).then(function(e){var n=e.payload.questionIdx;return r(K.Nw.setCurrentQuestionIdx(n))})},[r,p]),A=w.useCallback(function(){r(K.Nw.resetQuestionAndAnswer()),r((0,G.Pm)()),r(K.Nw.setCurrentQuestionIdx(0)),a.push("/results")},[r,a]);return void 0!=d?(0,m.jsxs)(Q.Z,{className:N()(n,U().container),children:[(0,m.jsxs)(Q.Z,{className:N()(U().infoRow),flexDirection:"row",my:1,children:[(0,m.jsxs)(y.Z,{textAlign:"left",children:["Вопрос ",x]}),(0,m.jsxs)(y.Z,{textAlign:"right",flex:1,children:["из ",_]})]}),(0,m.jsx)(g.Z,{className:N()(U().progressRow),children:(0,m.jsx)(g.Z,{className:N()(U().progressBar),sx:{width:B}})}),(0,m.jsx)(g.Z,{className:N()(U().questionRow),my:1,mt:2,children:(0,m.jsx)(y.Z,{variant:"h5",children:Z})}),(0,m.jsx)(g.Z,{className:N()(U().answersRow,s&&U().answersLoading),my:1,children:W}),(0,m.jsxs)(Q.Z,{className:N()(U().actionsRow),my:2,flexDirection:"row",gap:1,flexWrap:"wrap",children:[(0,m.jsx)(Y.Z,{className:"FixMuiButton",variant:"contained",disabled:!c||s,onClick:l?f?A:L:q,children:(0,m.jsx)("span",{className:"Text",children:l?f?"Завершить":"Следующий вопрос":"Проверить"})}),(0,m.jsx)(Y.Z,{className:"FixMuiButton",variant:"outlined",onClick:S,children:(0,m.jsx)("span",{className:"Text",children:"Отказаться от игры"})})]})]}):null}var I=r(8736),O=r.n(I);function z(e){var n=e.className,r=(0,v.u9)(),a=(0,v.JL)(),s=w.useMemo(function(){var e=a&&Object.keys(a);return e&&e.length?(r&&e.length>1?e.filter(function(e){return e!==r}).concat(r):e).map(function(e){var n=a[e],s=n.name,t=n.questionAnswers;return(0,m.jsx)(D,{self:e===r,token:e,questionAnswers:t,name:s},e)}):null},[a,r]);return(0,m.jsxs)(g.Z,{className:N()(n,O().container),children:[(0,m.jsxs)(Q.Z,{className:N()(O().partnersBox),gap:2,children:[(0,m.jsx)(y.Z,{className:N()(O().partnersTitle),variant:"h6",textAlign:"left",children:"Участники"}),s]}),(0,m.jsx)(g.Z,{className:N()(O().gameBox),children:(0,m.jsx)(F,{className:N()(O().gameBox)})})]})}function X(e){var n=e.className,r=(0,h.useRouter)(),a=(0,v.u9)(),s=(0,v.gC)(),t=(0,v.aR)(),o=(0,v.po)(),i=(0,v.RP)(),c=(0,v.iT)(),l=(0,v.dn)(),u=(0,v.k5)(),_=!!(a&&s&&o&&l&&u&&("multi"!==t||c));w.useEffect(function(){_||r.push("/waiting")},[r,_]);var d=w.useMemo(function(){return _?i?(0,m.jsx)(z,{}):(0,m.jsx)(q,{reason:"Unknown"}):(0,m.jsx)(q,{reason:"Not ready"})},[_,i]);return(0,m.jsx)(g.Z,{className:N()(n,A().container),children:d})}var V=r(8356),H=r(1799),J=r(9396),$=r(215),ee=r(2171),en=r(542),er=r.n(en),ea=r(5713),es=r.n(ea);(0,V.qC)((s=(a={errorClassName:es().error,wrapperClassName:es().wrapper}).wrapperClassName,t=a.errorClassName,i=void 0===(o=a.showErrorInWrapper)||o,function(e){return function(n){var r=(0,$.tP)(),a=(0,$.lO)(),o=(0,$.YH)(),c=(0,$.X4)()||a;w.useEffect(function(){c&&x.Am.error((0,ee.VK)(c))},[c]);var l=(0,$.Nc)(),u=(0,$.RP)(),_=(0,h.useRouter)(),d=w.useCallback(function(){_.push("/")},[_]);return(0,m.jsxs)("div",{className:N()(s,er().container),children:[i&&c&&(0,m.jsxs)(g.Z,{className:N()(er().contentErrorContainer),m:2,children:[(0,m.jsx)(y.Z,{className:N()(t,er().contentError),m:2,children:(0,ee.VK)(c)}),(0,m.jsx)(Q.Z,{className:er().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,m.jsx)(Y.Z,{className:"FixMuiButton",onClick:d,variant:"contained",children:(0,m.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!r&&(0,m.jsx)("div",{className:er().contentContainer,children:(0,m.jsx)(e,(0,J.Z)((0,H.Z)({},n),{error:c,isLoading:o,isFinished:l,isPlaying:u}))}),(0,m.jsx)(x.uY,{className:er().smallLoader,spinnerSize:"medium",show:o&&u}),(0,m.jsx)(x.uY,{className:er().loaderSplash,show:o&&!u,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(X);var et=r(7485),eo=r.n(et),ei=r(5303),ec=r.n(ei),el=(0,V.qC)((l=(c={errorClassName:ec().error,wrapperClassName:ec().wrapper}).wrapperClassName,u=c.errorClassName,d=void 0===(_=c.showErrorInWrapper)||_,function(e){return function(n){var r=(0,$.$P)(),a=(0,$.tP)(),s=(0,$.lO)(),t=(0,$.YH)(),o=(0,$.X4)(),i=(0,$.Vh)(),c=(0,$.QT)(),_=r||a||t||i,p=o||s||c;w.useEffect(function(){p&&x.Am.error((0,ee.VK)(p))},[p]);var f=(0,$.Nc)(),C=(0,$.RP)(),j=(0,h.useRouter)(),v=w.useCallback(function(){j.push("/")},[j]);return(0,m.jsxs)("div",{className:N()(l,eo().container),children:[d&&p&&(0,m.jsxs)(g.Z,{className:N()(eo().contentErrorContainer),m:2,children:[(0,m.jsx)(y.Z,{className:N()(u,eo().contentError),m:2,children:(0,ee.VK)(p)}),(0,m.jsx)(Q.Z,{className:eo().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,m.jsx)(Y.Z,{className:"FixMuiButton",onClick:v,variant:"contained",children:(0,m.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!a&&(0,m.jsx)(g.Z,{className:eo().contentContainer,children:(0,m.jsx)(e,(0,J.Z)((0,H.Z)({},n),{error:p,isLoading:_,gameSessionIsFinished:f,gameSessionIsPlaying:C}))}),(0,m.jsx)(x.uY,{className:eo().smallLoader,spinnerSize:"medium",show:_&&C}),(0,m.jsx)(x.uY,{className:eo().loaderSplash,show:_&&!C,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(e){var n=e.className,r=(0,v.TL)(),a=(0,h.useRouter)(),s=(0,v.u9)(),t=(0,v.gC)(),o=(0,v.aR)(),i=(0,v.po)(),c=(0,v.RP)(),l=(0,v.Nc)(),u=(0,v.iT)(),_=(0,v.dn)(),d=(0,v.k5)(),p=!!(s&&t&&i),x=!!(p&&_&&d&&("multi"!==o||u));w.useEffect(function(){p&&r((0,j.P)())},[p,r]),w.useEffect(function(){!p||x||l||c||(console.log("[GameBlock]: start game?"),r((0,G.fZ)()))},[p,x,l,c,r]),w.useEffect(function(){p||a.push("/waiting")},[a,p]);var f=w.useMemo(function(){return x?c?(0,m.jsx)(X,{}):(0,m.jsx)(E,{reason:"Unknown"}):(0,m.jsx)(E,{reason:"Not ready"})},[x,c]);return(0,m.jsx)(g.Z,{className:N()(n,R().container),my:2,flexDirection:"row",children:f})}),eu=function(){var e=(0,f.d)("Игра");return(0,m.jsx)(p.Z,{title:e,children:(0,m.jsx)(x.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,m.jsx)(el,{})})})}},8736:function(e){e.exports={container:"GameLayout_container__a9RxR",box:"GameLayout_box__2JorJ",partnersBox:"GameLayout_partnersBox__sKL6r",gameBox:"GameLayout_gameBox__YQH2L",DEBUG:"GameLayout_DEBUG__44p6d"}},4254:function(e){e.exports={container:"GamePlaying_container__8SLk7"}},8562:function(e){e.exports={container:"GamePlayingContent_container__aSnwj",Empty:"GamePlayingContent_Empty__U0pPk",WaitingMulti:"GamePlayingContent_WaitingMulti__UKIn8",WaitingSingle:"GamePlayingContent_WaitingSingle__ofYKC",WaitingFailed:"GamePlayingContent_WaitingFailed__eTXf9",WasCancelled:"GamePlayingContent_WasCancelled__MfhlT",GameReady:"GamePlayingContent_GameReady__lOmat",WaitingStart:"GamePlayingContent_WaitingStart__YaWyM",DEBUG:"GamePlayingContent_DEBUG__wFybG",error:"GamePlayingContent_error__nWi_M",actions:"GamePlayingContent_actions__fvFCS"}},5713:function(e){e.exports={error:"WrappedGamePlaying_error__X2EPd",wrapper:"WrappedGamePlaying_wrapper__YSwgS"}},7189:function(e){e.exports={container:"Partner_container__rAS5t",self:"Partner_self__592Ry",other:"Partner_other__3_ouq",question:"Partner_question__LRcnT",questionsBox:"Partner_questionsBox__AV0_v",DEBUG:"Partner_DEBUG__Lv99n",questionCorrect:"Partner_questionCorrect__NKwdH",questionWrong:"Partner_questionWrong__qKUbS",questionFinished:"Partner_questionFinished__JvMSe"}},2033:function(e){e.exports={container:"QuestionsCard_container__2lWSZ",infoRow:"QuestionsCard_infoRow__vSNhD",progressRow:"QuestionsCard_progressRow__Y7G4Y",questionRow:"QuestionsCard_questionRow__xKYGg",answersRow:"QuestionsCard_answersRow__mg5yR",actionsRow:"QuestionsCard_actionsRow__Yqp0R",DEBUG:"QuestionsCard_DEBUG__E8uoT",progressBar:"QuestionsCard_progressBar__aZZ3b",answersLoading:"QuestionsCard_answersLoading__FvUcC",answer:"QuestionsCard_answer__33R_Y",answerText:"QuestionsCard_answerText__heme_",answerCorrect:"QuestionsCard_answerCorrect__4JKNB",answerWrong:"QuestionsCard_answerWrong__9_LCO",answerChecked:"QuestionsCard_answerChecked__Zvpm4",answerLoading:"QuestionsCard_answerLoading__GaQ1G",answerActive:"QuestionsCard_answerActive__OKuD6"}},851:function(e){e.exports={container:"GameBlock_container__6ajde"}},844:function(e){e.exports={container:"GameBlockContent_container__x3Jwv",Empty:"GameBlockContent_Empty__Kfu40",GameReady:"GameBlockContent_GameReady__jV5t8",DEBUG:"GameBlockContent_DEBUG__vBGKd",error:"GameBlockContent_error__fsdHU",actions:"GameBlockContent_actions__ohim0"}},5303:function(e){e.exports={error:"WrappedGameBlock_error__6n7kx",wrapper:"WrappedGameBlock_wrapper__KbOID"}},7485:function(e){e.exports={container:"GamePlayingWrapper_container__c_kTA",contentError:"GamePlayingWrapper_contentError__dhYPs",contentContainer:"GamePlayingWrapper_contentContainer__xlavK",smallLoader:"GamePlayingWrapper_smallLoader__mYf3r",loaderSplash:"GamePlayingWrapper_loaderSplash__qFtCz"}},542:function(e){e.exports={container:"GameSessionWrapper_container__aDk9O",contentError:"GameSessionWrapper_contentError__ATjRz",contentContainer:"GameSessionWrapper_contentContainer__9ZWe_",smallLoader:"GameSessionWrapper_smallLoader__MetXT",loaderSplash:"GameSessionWrapper_loaderSplash__61cgZ"}}},function(e){e.O(0,[911,766,390,705,774,888,179],function(){return e(e.s=134)}),_N_E=e.O()}]);
//# sourceMappingURL=game-c5f9cde819f126a3.js.map