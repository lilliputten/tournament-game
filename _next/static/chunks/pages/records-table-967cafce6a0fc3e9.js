(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{9211:function(e,l,t){"use strict";t.d(l,{Z:function(){return v}});var n=t(3366),a=t(7462),o=t(7294),c=t(6010),r=t(9766),s=t(4780),i=t(4867),d=t(182);let u=(0,d.ZP)();var b=t(5149),_=t(9707),m=t(6500),f=t(5408),k=t(8700),T=t(5893);let h=["component","direction","spacing","divider","children","className"],x=(0,m.Z)(),R=u("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,l)=>l.root});function C(e){return(0,b.Z)({props:e,name:"MuiStack",defaultTheme:x})}let j=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],p=({ownerState:e,theme:l})=>{let t=(0,a.Z)({display:"flex",flexDirection:"column"},(0,f.k9)({theme:l},(0,f.P$)({values:e.direction,breakpoints:l.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let n=(0,k.hB)(l),a=Object.keys(l.breakpoints.values).reduce((l,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(l[t]=!0),l),{}),o=(0,f.P$)({values:e.direction,base:a}),c=(0,f.P$)({values:e.spacing,base:a});"object"==typeof o&&Object.keys(o).forEach((e,l,t)=>{let n=o[e];if(!n){let n=l>0?o[t[l-1]]:"column";o[e]=n}});let s=(l,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${j(t?o[t]:e.direction)}`]:(0,k.NA)(n,l)}});t=(0,r.Z)(t,(0,f.k9)({theme:l},c,s))}return(0,f.dt)(l.breakpoints,t)},N=function(e={}){let{createStyledComponent:l=R,useThemeProps:t=C,componentName:r="MuiStack"}=e,d=()=>(0,s.Z)({root:["root"]},e=>(0,i.Z)(r,e),{}),u=l(p),b=o.forwardRef(function(e,l){let r=t(e),s=(0,_.Z)(r),{component:i="div",direction:b="column",spacing:m=0,divider:f,children:k,className:x}=s,R=(0,n.Z)(s,h),C=d();return(0,T.jsx)(u,(0,a.Z)({as:i,ownerState:{direction:b,spacing:m},ref:l,className:(0,c.Z)(C.root,x)},R,{children:f?function(e,l){let t=o.Children.toArray(e).filter(Boolean);return t.reduce((e,n,a)=>(e.push(n),a<t.length-1&&e.push(o.cloneElement(l,{key:`separator-${a}`})),e),[])}(k,f):k}))});return b}();var v=N},5028:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/records-table",function(){return t(5647)}])},5647:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return Z}});var n=t(5893),a=t(2720),o=t(5409),c=t(7433),r=t(7294),s=t(1163),i=t(7357),d=t(4184),u=t.n(d),b=t(6322),_=t(99),m=t.n(_),f=t(6327),k=t(8122),T=t(5861),h=t(9211),x=t(6041),R=t(2171),C=t(457),j=t.n(C);function p(e){var l=e.reason;return(0,n.jsx)(i.Z,{"data-reason":l||null,className:u()(j().container,j().Empty),children:x.Z.build.isDev&&l&&(0,n.jsxs)(T.Z,{children:["WatingBlock Empty: ",l]})})}function N(e){var l=e.gameRecord,t=e.activeGameToken,a=e.idx,o=l.Token,c=l.partnersInfo,r=l.startedTimestamp,s=l.winnerToken,i=s&&c&&c[s],d=a+1,b=i&&i.name||void 0,_=i&&i.questionAnswers||void 0,m=_&&Object.values(_),f=m?m.length:0,k=m&&m.reduce(function(e,l){return"correct"===l?e+1:e},0),T=i&&i.finishedTimestamp||void 0,h=(0,R.pI)(r,T);return(0,n.jsxs)("tr",{id:o,className:u()(j().tableRow,j()["tableRow"+d],o===t&&j().activeGame),children:[(0,n.jsx)("td",{className:u()(j().tableCell,j().cellNo),children:d}),(0,n.jsx)("td",{className:u()(j().tableCell,j().cellName),children:b}),(0,n.jsxs)("td",{className:u()(j().tableCell,j().cellAnswers),children:[k," / ",f]}),(0,n.jsx)("td",{className:u()(j().tableCell,j().cellTime),children:h})]})}function v(e){var l=e.recordsTable,t=e.gameToken,a=!!(l&&l.length),o=r.useMemo(function(){return a&&l.map(function(e,l){return(0,n.jsx)(N,{idx:l,gameRecord:e,activeGameToken:t},e.Token)})},[a,l,t]);return a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{className:j().tableTitle,children:"Турнирная таблица"}),(0,n.jsxs)("table",{className:j().table,cellPadding:4,cellSpacing:2,width:"100%",border:0,children:[(0,n.jsx)("thead",{className:j().tableHeadRow,children:(0,n.jsxs)("tr",{className:u()(j().tableRow,j().tableHeadRow),children:[(0,n.jsx)("th",{className:u()(j().tableHeadCell,j().cellNo),children:"Место"}),(0,n.jsx)("th",{className:u()(j().tableHeadCell,j().cellName),children:"Игрок"}),(0,n.jsx)("th",{className:u()(j().tableHeadCell,j().cellAnswers),children:"Верных ответов"}),(0,n.jsx)("th",{className:u()(j().tableHeadCell,j().cellTime),children:"Время"})]})}),(0,n.jsx)("tbody",{className:j().tableBody,children:o})]})]}):(0,n.jsx)(T.Z,{children:"Турнирная таблица пока пуста."})}function g(e){var l=e.onClick,t=e.goToStartPage,a=e.recordsTable,o=e.gameToken;return(0,n.jsxs)(i.Z,{className:u()(j().container,j().WaitingFailed),children:[(0,n.jsx)(v,{recordsTable:a,gameToken:o}),(0,n.jsxs)(h.Z,{className:j().actions,spacing:2,direction:"row",justifyContent:"center",my:2,mt:4,children:[!!t&&(0,n.jsx)(k.Z,{className:"FixMuiButton",onClick:t,variant:"contained",children:(0,n.jsx)("span",{className:"Text",children:"Сыграть ещё раз"})}),!!l&&!!o&&(0,n.jsx)(k.Z,{className:"FixMuiButton",onClick:l,disabled:!l,children:(0,n.jsx)("span",{className:"Text",children:"Посмотреть результаты"})})]})]})}function w(e){var l=e.className,t=(0,b.TL)(),a=(0,s.useRouter)(),o=(0,b.u9)(),c=(0,b.gC)(),d=(0,b.dn)(),_=(0,b.w3)(),k=!!(c&&o),T=r.useCallback(function(){a.push("/")},[a]);r.useEffect(function(){k&&t((0,f.K)())},[k,t]);var h=r.useCallback(function(){a.push("/results")},[a]),x=r.useMemo(function(){return k?(0,n.jsx)(g,{onClick:h,goToStartPage:T,token:o,gameToken:d,recordsTable:_}):(0,n.jsx)(p,{reason:"Not ready"})},[k,h,T,o,d,_]);return(0,n.jsx)(i.Z,{className:u()(l,m().container),my:2,children:x})}var B=t(1046),y=t.n(B),Z=function(){var e=(0,c.d)("Результаты");return(0,n.jsx)(a.Z,{className:y().root,title:e,children:(0,n.jsx)(o.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,n.jsx)(w,{})})})}},99:function(e){e.exports={container:"RecordsTableBlock_container__ldFJX"}},457:function(e){e.exports={container:"RecordsTableBlockContent_container__nHyRB",Empty:"RecordsTableBlockContent_Empty__KjAeo",error:"RecordsTableBlockContent_error__u5eqa",actions:"RecordsTableBlockContent_actions__oSbk9",tableHeadCell:"RecordsTableBlockContent_tableHeadCell__m4s57",tableHeadRow:"RecordsTableBlockContent_tableHeadRow__aOgmx",tableBody:"RecordsTableBlockContent_tableBody__PomMv",tableRow:"RecordsTableBlockContent_tableRow__iTdYp",tableCell:"RecordsTableBlockContent_tableCell__lhgi9",table:"RecordsTableBlockContent_table__97c0y",tableTitle:"RecordsTableBlockContent_tableTitle__XeeTg",cellNo:"RecordsTableBlockContent_cellNo__tEZFT",cellName:"RecordsTableBlockContent_cellName__d6qgA",cellTime:"RecordsTableBlockContent_cellTime__mxR2I",cellAnswers:"RecordsTableBlockContent_cellAnswers__bG9AF",tableRow1:"RecordsTableBlockContent_tableRow1__4_1Pz",tableRow2:"RecordsTableBlockContent_tableRow2__4Ft_g",tableRow3:"RecordsTableBlockContent_tableRow3__lLUEr",activeGame:"RecordsTableBlockContent_activeGame__DqtyM"}},1046:function(e){e.exports={root:"RecordsTablePage_root__BMj0_"}}},function(e){e.O(0,[911,259,390,674,774,888,179],function(){return e(e.s=5028)}),_N_E=e.O()}]);
//# sourceMappingURL=records-table-967cafce6a0fc3e9.js.map