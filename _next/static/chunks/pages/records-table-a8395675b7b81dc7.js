(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{5028:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/records-table",function(){return a(416)}])},416:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return z}});var n,t,r,o,c,s,i=a(5893),d=a(2720),_=a(5409),b=a(7433),m=a(7294),u=a(1163),T=a(7357),h=a(4184),x=a.n(h),C=a(8356),N=a(6322),p=a(99),k=a.n(p),R=a(6327),j=a(8122),f=a(5861),w=a(9211),g=a(9746),B=a(6041),v=a(2171),y=a(457),E=a.n(y);function Z(e){var l=e.reason;return(0,i.jsx)(T.Z,{"data-reason":l||null,className:x()(E().container,E().Empty),children:B.Z.build.isDev&&l&&(0,i.jsxs)(f.Z,{children:["WatingBlock Empty: ",l]})})}function H(e){var l=e.recordEntry,a=e.token,n=e.activeGameToken,t=e.idx+1,r=l.finishedTimestamp,o=l.gameToken,c=l.name,s=l.partnerToken,d=l.questionAnswers,_=l.startedTimestamp,b=d&&Object.values(d),m=b?b.length:0,u=b&&b.reduce(function(e,l){return"correct"===l?e+1:e},0),T=r&&(0,g.Z)(new Date(r),B.Z.constants.dateTimeFormat),h=(0,v.pI)(_,r);return(0,i.jsxs)("tr",{id:o+"/"+s,className:x()(E().tableRow,E()["tableRow"+t],o===n&&s===a&&E().activeGame),children:[(0,i.jsx)("td",{className:x()(E().tableCell,E().cellNo),children:t}),(0,i.jsx)("td",{className:x()(E().tableCell,E().cellName),children:c}),(0,i.jsxs)("td",{className:x()(E().tableCell,E().cellAnswers),children:[u,!!m&&" / "+m]}),(0,i.jsx)("td",{className:x()(E().tableCell,E().cellTime),children:h}),(0,i.jsx)("td",{className:x()(E().tableCell,E().cellDate),children:T})]})}function A(e){var l=e.recordsTable,a=e.gameToken,n=!!(l&&l.length),t=m.useMemo(function(){return n&&l.map(function(e,l){return(0,i.jsx)(H,{idx:l,recordEntry:e,activeGameToken:a},e.gameToken+"/"+e.partnerToken)})},[n,l,a]);return n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.Z,{className:E().tableTitle,children:"Турнирная таблица"}),(0,i.jsxs)("table",{className:E().table,cellPadding:4,cellSpacing:2,width:"100%",border:0,children:[(0,i.jsx)("thead",{className:E().tableHeadRow,children:(0,i.jsxs)("tr",{className:x()(E().tableRow,E().tableHeadRow),children:[(0,i.jsx)("th",{className:x()(E().tableHeadCell,E().cellNo),children:"Место"}),(0,i.jsx)("th",{className:x()(E().tableHeadCell,E().cellName),children:"Игрок"}),(0,i.jsx)("th",{className:x()(E().tableHeadCell,E().cellAnswers),children:"Верных ответов"}),(0,i.jsx)("th",{className:x()(E().tableHeadCell,E().cellTime),children:"Время"}),(0,i.jsx)("th",{className:x()(E().tableHeadCell,E().cellDate),children:"Дата"})]})}),(0,i.jsx)("tbody",{className:E().tableBody,children:t})]})]}):(0,i.jsx)(f.Z,{children:"Турнирная таблица пока пуста."})}function F(e){var l=e.onClick,a=e.goToStartPage,n=e.recordsTable,t=e.gameToken;return(0,i.jsxs)(T.Z,{className:x()(E().container,E().WaitingFailed),children:[(0,i.jsx)(A,{recordsTable:n,gameToken:t}),(0,i.jsxs)(w.Z,{className:E().actions,spacing:2,direction:"row",justifyContent:"center",my:2,mt:4,children:[!!a&&(0,i.jsx)(j.Z,{className:"FixMuiButton",onClick:a,variant:"contained",children:(0,i.jsx)("span",{className:"Text",children:"Сыграть ещё раз"})}),!!l&&!!t&&(0,i.jsx)(j.Z,{className:"FixMuiButton",onClick:l,disabled:!l,children:(0,i.jsx)("span",{className:"Text",children:"Посмотреть результаты"})})]})]})}var S=a(1799),W=a(9396),D=a(3005),P=a(9142),M=a.n(P),G=(0,C.qC)((t=(n={errorClassName:k().error,wrapperClassName:k().wrapper,contentClassName:k().content}).wrapperClassName,r=n.contentClassName,o=n.errorClassName,s=void 0===(c=n.showErrorInWrapper)||c,function(e){return function(l){var a=(0,D.yI)(),n=(0,D.Ay)();return m.useEffect(function(){n&&_.Am.error((0,v.VK)(n))},[n]),(0,i.jsxs)("div",{className:x()(t,M().container),children:[s&&n&&(0,i.jsx)(f.Z,{className:x()(o,M().contentError),children:(0,v.VK)(n)}),(0,i.jsx)("div",{className:x()(r,M().contentContainer),children:(0,i.jsx)(e,(0,W.Z)((0,S.Z)({},l),{error:n,isLoading:a}))}),(0,i.jsx)(_.uY,{className:M().loaderSplash,show:a,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(e){var l=e.className,a=(0,N.TL)(),n=(0,u.useRouter)(),t=(0,N.Fw)(),r=(0,N.yI)(),o=(0,N.Ay)(),c=t&&!r&&!o,s=(0,N.u9)(),d=(0,N.dn)(),_=(0,N.w3)(),b=m.useCallback(function(){n.push("/")},[n]);m.useEffect(function(){a((0,R.K)())},[a]);var h=m.useCallback(function(){n.push("/results")},[n]),C=m.useMemo(function(){return c?(0,i.jsx)(F,{onClick:h,goToStartPage:b,token:s,gameToken:d,recordsTable:_}):(0,i.jsx)(Z,{reason:"Not ready"})},[c,h,b,s,d,_]);return(0,i.jsx)(T.Z,{className:x()(l,k().container),my:2,children:C})}),I=a(1046),q=a.n(I),z=function(){var e=(0,b.d)("Результаты");return(0,i.jsx)(d.Z,{className:q().root,title:e,children:(0,i.jsx)(_.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,i.jsx)(G,{})})})}},99:function(e){e.exports={container:"RecordsTableBlock_container__ldFJX"}},457:function(e){e.exports={container:"RecordsTableBlockContent_container__nHyRB",Empty:"RecordsTableBlockContent_Empty__KjAeo",error:"RecordsTableBlockContent_error__u5eqa",actions:"RecordsTableBlockContent_actions__oSbk9",tableHeadCell:"RecordsTableBlockContent_tableHeadCell__m4s57",tableHeadRow:"RecordsTableBlockContent_tableHeadRow__aOgmx",tableBody:"RecordsTableBlockContent_tableBody__PomMv",tableRow:"RecordsTableBlockContent_tableRow__iTdYp",tableCell:"RecordsTableBlockContent_tableCell__lhgi9",table:"RecordsTableBlockContent_table__97c0y",tableTitle:"RecordsTableBlockContent_tableTitle__XeeTg",cellNo:"RecordsTableBlockContent_cellNo__tEZFT",cellName:"RecordsTableBlockContent_cellName__d6qgA",cellTime:"RecordsTableBlockContent_cellTime__mxR2I",cellDate:"RecordsTableBlockContent_cellDate__y96_E",cellAnswers:"RecordsTableBlockContent_cellAnswers__bG9AF",tableRow1:"RecordsTableBlockContent_tableRow1__4_1Pz",tableRow2:"RecordsTableBlockContent_tableRow2__4Ft_g",tableRow3:"RecordsTableBlockContent_tableRow3__lLUEr",activeGame:"RecordsTableBlockContent_activeGame__DqtyM"}},9142:function(e){e.exports={container:"RecordsTableWrapper_container__oNt6W",contentError:"RecordsTableWrapper_contentError__ZHIgh",contentContainer:"RecordsTableWrapper_contentContainer__iicUz",smallLoader:"RecordsTableWrapper_smallLoader__dA1tV",loaderSplash:"RecordsTableWrapper_loaderSplash__0EgDn"}},1046:function(e){e.exports={root:"RecordsTablePage_root__BMj0_"}}},function(e){e.O(0,[911,234,998,390,674,774,888,179],function(){return e(e.s=5028)}),_N_E=e.O()}]);
//# sourceMappingURL=records-table-a8395675b7b81dc7.js.map