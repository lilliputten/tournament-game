(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{5028:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/records-table",function(){return a(5647)}])},5647:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return Z}});var t=a(5893),n=a(2720),c=a(5409),o=a(7433),s=a(7294),r=a(1163),i=a(7357),d=a(4184),_=a.n(d),b=a(6322),m=a(99),u=a.n(m),T=a(6327),x=a(8122),h=a(5861),C=a(9211),k=a(9746),N=a(6041),R=a(2171),j=a(457),f=a.n(j);function w(e){var l=e.reason;return(0,t.jsx)(i.Z,{"data-reason":l||null,className:_()(f().container,f().Empty),children:N.Z.build.isDev&&l&&(0,t.jsxs)(h.Z,{children:["WatingBlock Empty: ",l]})})}function B(e){var l=e.recordEntry,a=e.activeGameToken,n=e.idx+1,c=(0,b.u9)(),o=l.finishedTimestamp,s=l.gameToken,r=l.name,i=l.partnerToken,d=l.questionAnswers,m=l.startedTimestamp,u=d&&Object.values(d),T=u?u.length:0,x=u&&u.reduce(function(e,l){return"correct"===l?e+1:e},0),h=o&&(0,k.Z)(new Date(o),N.Z.constants.dateTimeFormat),C=(0,R.pI)(m,o);return(0,t.jsxs)("tr",{id:s+"/"+i,className:_()(f().tableRow,f()["tableRow"+n],s===a&&i===c&&f().activeGame),children:[(0,t.jsx)("td",{className:_()(f().tableCell,f().cellNo),children:n}),(0,t.jsx)("td",{className:_()(f().tableCell,f().cellName),children:r}),(0,t.jsxs)("td",{className:_()(f().tableCell,f().cellAnswers),children:[x,!!T&&" / "+T]}),(0,t.jsx)("td",{className:_()(f().tableCell,f().cellTime),children:C}),(0,t.jsx)("td",{className:_()(f().tableCell,f().cellDate),children:h})]})}function g(e){var l=e.recordsTable,a=e.gameToken,n=!!(l&&l.length),c=s.useMemo(function(){return n&&l.map(function(e,l){return(0,t.jsx)(B,{idx:l,recordEntry:e,activeGameToken:a},e.gameToken+"/"+e.partnerToken)})},[n,l,a]);return n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{className:f().tableTitle,children:"Турнирная таблица"}),(0,t.jsxs)("table",{className:f().table,cellPadding:4,cellSpacing:2,width:"100%",border:0,children:[(0,t.jsx)("thead",{className:f().tableHeadRow,children:(0,t.jsxs)("tr",{className:_()(f().tableRow,f().tableHeadRow),children:[(0,t.jsx)("th",{className:_()(f().tableHeadCell,f().cellNo),children:"Место"}),(0,t.jsx)("th",{className:_()(f().tableHeadCell,f().cellName),children:"Игрок"}),(0,t.jsx)("th",{className:_()(f().tableHeadCell,f().cellAnswers),children:"Верных ответов"}),(0,t.jsx)("th",{className:_()(f().tableHeadCell,f().cellTime),children:"Время"}),(0,t.jsx)("th",{className:_()(f().tableHeadCell,f().cellDate),children:"Дата"})]})}),(0,t.jsx)("tbody",{className:f().tableBody,children:c})]})]}):(0,t.jsx)(h.Z,{children:"Турнирная таблица пока пуста."})}function p(e){var l=e.onClick,a=e.goToStartPage,n=e.recordsTable,c=e.gameToken;return(0,t.jsxs)(i.Z,{className:_()(f().container,f().WaitingFailed),children:[(0,t.jsx)(g,{recordsTable:n,gameToken:c}),(0,t.jsxs)(C.Z,{className:f().actions,spacing:2,direction:"row",justifyContent:"center",my:2,mt:4,children:[!!a&&(0,t.jsx)(x.Z,{className:"FixMuiButton",onClick:a,variant:"contained",children:(0,t.jsx)("span",{className:"Text",children:"Сыграть ещё раз"})}),!!l&&!!c&&(0,t.jsx)(x.Z,{className:"FixMuiButton",onClick:l,disabled:!l,children:(0,t.jsx)("span",{className:"Text",children:"Посмотреть результаты"})})]})]})}function v(e){var l=e.className,a=(0,b.TL)(),n=(0,r.useRouter)(),c=(0,b.u9)(),o=(0,b.gC)(),d=(0,b.dn)(),m=(0,b.w3)(),x=!!(o&&c),h=s.useCallback(function(){n.push("/")},[n]);s.useEffect(function(){x&&a((0,T.K)())},[x,a]);var C=s.useCallback(function(){n.push("/results")},[n]),k=s.useMemo(function(){return x?(0,t.jsx)(p,{onClick:C,goToStartPage:h,token:c,gameToken:d,recordsTable:m}):(0,t.jsx)(w,{reason:"Not ready"})},[x,C,h,c,d,m]);return(0,t.jsx)(i.Z,{className:_()(l,u().container),my:2,children:k})}var y=a(1046),E=a.n(y),Z=function(){var e=(0,o.d)("Результаты");return(0,t.jsx)(n.Z,{className:E().root,title:e,children:(0,t.jsx)(c.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,t.jsx)(v,{})})})}},99:function(e){e.exports={container:"RecordsTableBlock_container__ldFJX"}},457:function(e){e.exports={container:"RecordsTableBlockContent_container__nHyRB",Empty:"RecordsTableBlockContent_Empty__KjAeo",error:"RecordsTableBlockContent_error__u5eqa",actions:"RecordsTableBlockContent_actions__oSbk9",tableHeadCell:"RecordsTableBlockContent_tableHeadCell__m4s57",tableHeadRow:"RecordsTableBlockContent_tableHeadRow__aOgmx",tableBody:"RecordsTableBlockContent_tableBody__PomMv",tableRow:"RecordsTableBlockContent_tableRow__iTdYp",tableCell:"RecordsTableBlockContent_tableCell__lhgi9",table:"RecordsTableBlockContent_table__97c0y",tableTitle:"RecordsTableBlockContent_tableTitle__XeeTg",cellNo:"RecordsTableBlockContent_cellNo__tEZFT",cellName:"RecordsTableBlockContent_cellName__d6qgA",cellTime:"RecordsTableBlockContent_cellTime__mxR2I",cellDate:"RecordsTableBlockContent_cellDate__y96_E",cellAnswers:"RecordsTableBlockContent_cellAnswers__bG9AF",tableRow1:"RecordsTableBlockContent_tableRow1__4_1Pz",tableRow2:"RecordsTableBlockContent_tableRow2__4Ft_g",tableRow3:"RecordsTableBlockContent_tableRow3__lLUEr",activeGame:"RecordsTableBlockContent_activeGame__DqtyM"}},1046:function(e){e.exports={root:"RecordsTablePage_root__BMj0_"}}},function(e){e.O(0,[911,234,998,390,674,774,888,179],function(){return e(e.s=5028)}),_N_E=e.O()}]);
//# sourceMappingURL=records-table-d1696fb6ccffb219.js.map