(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{6447:function(e,n,t){"use strict";var i=t(3366),a=t(7462),r=t(7294),o=t(5408),s=t(8700),c=t(9707),l=t(9766),u=t(948),d=t(1657),m=t(5893);let g=["component","direction","spacing","divider","children"],p=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],f=({ownerState:e,theme:n})=>{let t=(0,a.Z)({display:"flex",flexDirection:"column"},(0,o.k9)({theme:n},(0,o.P$)({values:e.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let i=(0,s.hB)(n),a=Object.keys(n.breakpoints.values).reduce((n,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(n[t]=!0),n),{}),r=(0,o.P$)({values:e.direction,base:a}),c=(0,o.P$)({values:e.spacing,base:a});"object"==typeof r&&Object.keys(r).forEach((e,n,t)=>{let i=r[e];if(!i){let i=n>0?r[t[n-1]]:"column";r[e]=i}});let u=(n,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${p(t?r[t]:e.direction)}`]:(0,s.NA)(i,n)}});t=(0,l.Z)(t,(0,o.k9)({theme:n},c,u))}return(0,o.dt)(n.breakpoints,t)},h=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,n)=>[n.root]})(f),x=r.forwardRef(function(e,n){let t=(0,d.Z)({props:e,name:"MuiStack"}),o=(0,c.Z)(t),{component:s="div",direction:l="column",spacing:u=0,divider:p,children:f}=o,x=(0,i.Z)(o,g);return(0,m.jsx)(h,(0,a.Z)({as:s,ownerState:{direction:l,spacing:u},ref:n},x,{children:p?function(e,n){let t=r.Children.toArray(e).filter(Boolean);return t.reduce((e,i,a)=>(e.push(i),a<t.length-1&&e.push(r.cloneElement(n,{key:`separator-${a}`})),e),[])}(f,p):f}))});n.Z=x},9211:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var i=t(3366),a=t(7462),r=t(7294),o=t(6010),s=t(9766),c=t(4780),l=t(4867),u=t(182);let d=(0,u.ZP)();var m=t(5149),g=t(9707),p=t(6500),f=t(5408),h=t(8700),x=t(5893);let j=["component","direction","spacing","divider","children","className"],_=(0,p.Z)(),v=d("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,n)=>n.root});function Z(e){return(0,m.Z)({props:e,name:"MuiStack",defaultTheme:_})}let k=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],N=({ownerState:e,theme:n})=>{let t=(0,a.Z)({display:"flex",flexDirection:"column"},(0,f.k9)({theme:n},(0,f.P$)({values:e.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let i=(0,h.hB)(n),a=Object.keys(n.breakpoints.values).reduce((n,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(n[t]=!0),n),{}),r=(0,f.P$)({values:e.direction,base:a}),o=(0,f.P$)({values:e.spacing,base:a});"object"==typeof r&&Object.keys(r).forEach((e,n,t)=>{let i=r[e];if(!i){let i=n>0?r[t[n-1]]:"column";r[e]=i}});let c=(n,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${k(t?r[t]:e.direction)}`]:(0,h.NA)(i,n)}});t=(0,s.Z)(t,(0,f.k9)({theme:n},o,c))}return(0,f.dt)(n.breakpoints,t)},W=function(e={}){let{createStyledComponent:n=v,useThemeProps:t=Z,componentName:s="MuiStack"}=e,u=()=>(0,c.Z)({root:["root"]},e=>(0,l.Z)(s,e),{}),d=n(N),m=r.forwardRef(function(e,n){let s=t(e),c=(0,g.Z)(s),{component:l="div",direction:m="column",spacing:p=0,divider:f,children:h,className:_}=c,v=(0,i.Z)(c,j),Z=u();return(0,x.jsx)(d,(0,a.Z)({as:l,ownerState:{direction:m,spacing:p},ref:n,className:(0,o.Z)(Z.root,_)},v,{children:f?function(e,n){let t=r.Children.toArray(e).filter(Boolean);return t.reduce((e,i,a)=>(e.push(i),a<t.length-1&&e.push(r.cloneElement(n,{key:`separator-${a}`})),e),[])}(h,f):h}))});return m}();var C=W},2329:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waiting",function(){return t(121)}])},121:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return en}});var i,a,r,o,s,c=t(5893),l=t(2720),u=t(5409),d=t(7433),m=t(603),g=t(7294),p=t(1248),f=t(1163),h=t(7357),x=t(4184),j=t.n(x),_=t(6041),v=t(6322),Z=t(9280),k=t(7705),N=t(1586),W=t(5675),C=t.n(W),B=t(8122),w=t(5861),y=t(9211),b=t(9496),S=t.n(b),E=t(3420),M=t.n(E),T=t(875),R=t.n(T);function P(e){var n=e.reason;return(0,c.jsx)(h.Z,{"data-reason":n||null,className:j()(S().container,S().Empty),children:_.Z.build.isDev&&n&&(0,c.jsxs)(w.Z,{children:["WatingBlock Empty: ",n]})})}function G(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(S().container,S().WaitingStart),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Запуск игры на сервере"}),(0,c.jsx)(y.Z,{className:S().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!n&&(0,c.jsx)(B.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function F(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(S().container,S().WaitingMulti),children:[(0,c.jsx)(h.Z,{children:(0,c.jsx)(C(),{src:M(),width:300,height:300,alt:"Ожидаем партнёра"})}),(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Ищем соперника"}),(0,c.jsx)(w.Z,{gutterBottom:!0,children:"Это может занять несколько минут."}),(0,c.jsx)(y.Z,{className:S().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!n&&(0,c.jsx)(B.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function L(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(S().container,S().WaitingSingle),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Запуск одиночной игры"}),(0,c.jsx)(y.Z,{className:S().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!n&&(0,c.jsx)(B.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function D(e){var n=e.onSingleClick,t=e.goToStartPage;return(0,c.jsxs)(h.Z,{className:j()(S().container,S().WaitingFailed),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Похоже, сейчас нет подходщих соперников"}),(0,c.jsx)(w.Z,{gutterBottom:!0,children:"Вы можете сыграть самостоятельно и подняться в рейтинге"}),(0,c.jsxs)(y.Z,{className:S().actions,spacing:2,direction:"row",justifyContent:"center",children:[!!n&&(0,c.jsx)(B.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Турнир для одного"})}),!!t&&(0,c.jsx)(B.Z,{className:"FixMuiButton",onClick:t,children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})]})]})}function $(e){var n=e.goToStartPage;return(0,c.jsxs)(h.Z,{className:j()(S().container,S().WasCancelled),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры был отменён"}),(0,c.jsx)(y.Z,{className:S().actions,spacing:2,direction:"row",justifyContent:"center",children:!!n&&(0,c.jsx)(B.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]})}function O(e){var n=e.partnerName,t=e.gameMode,i=e.startGameDelaySec;return(0,c.jsxs)(h.Z,{className:j()(S().container,S().GameReady),children:[(0,c.jsx)(h.Z,{children:(0,c.jsx)(C(),{src:R(),width:200,height:200,alt:"Партнёр нашёлся!"})}),(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"multi"===t?"Ура! Соперник нашёлся":"Всё готово!"}),(0,c.jsxs)(w.Z,{gutterBottom:!0,children:["Турнир",n&&" с игроком "+n,i?" начнется через "+i+"  секунды":" сейчас начнётся","..."]})]})}var A=t(7506),K=t.n(A),V=t(8356),z=t(1799),I=t(9396),Q=t(3005),X=t(2171),H=t(6447),U=t(9724),Y=t.n(U),q=t(3611),J=t.n(q),ee=(0,V.qC)((a=(i={errorClassName:J().error,wrapperClassName:J().wrapper}).wrapperClassName,r=i.errorClassName,s=void 0===(o=i.showErrorInWrapper)||o,function(e){return function(n){var t=(0,Q.tP)(),i=(0,Q.lO)(),o=(0,Q.QL)(),l=(0,Q.e1)()||i;g.useEffect(function(){l&&u.Am.error((0,X.VK)(l))},[l]);var d=(0,Q.L8)(),m=(0,Q.po)(),p=(0,Q.RS)(),x=(0,f.useRouter)(),_=g.useCallback(function(){x.push("/")},[x]);return(0,c.jsxs)("div",{className:j()(a,Y().container),children:[s&&l&&(0,c.jsxs)(h.Z,{className:j()(Y().contentErrorContainer),m:2,children:[(0,c.jsx)(w.Z,{className:j()(r,Y().contentError),m:2,children:(0,X.VK)(l)}),(0,c.jsx)(H.Z,{className:Y().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,c.jsx)(B.Z,{className:"FixMuiButton",onClick:_,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!t&&(0,c.jsx)("div",{className:Y().contentContainer,children:(0,c.jsx)(e,(0,I.Z)((0,z.Z)({},n),{error:l,isLoading:o,isWaiting:d,isStarted:m,isFailed:p}))}),(o||d)&&(0,c.jsx)(u.uY,{className:Y().smallLoader,spinnerSize:"medium",show:!0}),(0,c.jsx)(u.uY,{className:Y().loaderSplash,show:t,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(e){var n=e.className,t=(0,p.oR)(),i=(0,v.TL)(),a=(0,f.useRouter)(),r=(0,v.u9)(),o=(0,v.gC)(),s=(0,v.aR)(),l=(0,v.QL)(),u=(0,v.L8)(),d=(0,v.vn)(),x=(0,v.po)(),W=(0,v.RS)(),C=(0,v.V5)(),B=!!o&&!!r,w=g.useCallback(function(){a.push("/")},[a]),y=g.useCallback(function(){a.push("/game")},[a]);g.useEffect(function(){B&&x&&("multi"===s?setTimeout(y,3e3):y())},[y,B,x,s]),g.useEffect(function(){B&&(0,N.Wh)(t)},[B,t]),g.useEffect(function(){B||_.Z.build.isDev||localStorage.getItem("gameParams:userName")||w()},[w,B,l,r,o,s]);var b=g.useCallback(function(){i(Z.Nw.setGameMode("single"))},[i]),S=(0,m.Z)(g.useState(!1),2),E=S[0],M=S[1],T=g.useCallback(function(){(0,v.Io)(),i((0,N.Mb)()),i(k.Nw.resetData()),M(!0)},[i]),R=g.useMemo(function(){if(!B)return(0,c.jsx)(P,{reason:"Not ready"});if(x)return(0,c.jsx)(O,{partnerName:C,gameMode:s});if(W)return(0,c.jsx)(D,{onSingleClick:b,goToStartPage:w});if(E)return(0,c.jsx)($,{goToStartPage:w});if(!u)return(0,c.jsx)(P,{reason:"Not waiting"});if(!d)return(0,c.jsx)(G,{cancelWaiting:T,isWaiting:!0});if("single"===s)return(0,c.jsx)(L,{cancelWaiting:T,isWaiting:!0});else return(0,c.jsx)(F,{cancelWaiting:T,isWaiting:!0})},[T,s,w,b,W,B,x,u,d,C,E]);return(0,c.jsx)(h.Z,{className:j()(n,K().container),my:2,children:R})}),en=function(){var e=(0,d.d)("Старт игры");return(0,c.jsx)(l.Z,{title:e,children:(0,c.jsx)(u.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,c.jsx)(ee,{})})})}},7506:function(e){e.exports={container:"WaitingBlock_container__kQnxn"}},9496:function(e){e.exports={container:"WaitingBlockContent_container__AvQRT",Empty:"WaitingBlockContent_Empty___6Tvv",WaitingMulti:"WaitingBlockContent_WaitingMulti__IGH0K",WaitingSingle:"WaitingBlockContent_WaitingSingle__GOTv0",WaitingFailed:"WaitingBlockContent_WaitingFailed__X7Pa6",WasCancelled:"WaitingBlockContent_WasCancelled__HUBMl",GameReady:"WaitingBlockContent_GameReady__k3_SD",WaitingStart:"WaitingBlockContent_WaitingStart__6ah0V",DEBUG:"WaitingBlockContent_DEBUG__dXVaB",error:"WaitingBlockContent_error__mKOKG",actions:"WaitingBlockContent_actions__NE6aF"}},3611:function(e){e.exports={error:"WrappedWaitingBlock_error__M20nw",wrapper:"WrappedWaitingBlock_wrapper__2tBuN"}},9724:function(e){e.exports={container:"GameWaitingWrapper_container__YHwwm",contentError:"GameWaitingWrapper_contentError__nEGp2",contentContainer:"GameWaitingWrapper_contentContainer__B8_sf",smallLoader:"GameWaitingWrapper_smallLoader__7Kwnu",loaderSplash:"GameWaitingWrapper_loaderSplash__LjhsM"}},3420:function(e){e.exports="/_next/static/images/globe-2-3511031bcbe580e593dac66c08da2702.gif"},875:function(e){e.exports="/_next/static/images/hooray-a6d650852dc995420db9a7a030cba144.gif"}},function(e){e.O(0,[911,234,715,390,674,774,888,179],function(){return e(e.s=2329)}),_N_E=e.O()}]);
//# sourceMappingURL=waiting-2a6d86456df4ff5a.js.map