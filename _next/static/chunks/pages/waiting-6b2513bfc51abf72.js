(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{2329:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waiting",function(){return t(71)}])},71:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ex}});var a,r,i,s,o,c=t(5893),l=t(2720),u=t(5409),d=t(7433),m=t(603),x=t(7294),p=t(1248),g=t(1163),h=t(7357),f=t(4184),j=t.n(f),N=t(6041),v=t(5937),Z=t(9280),W=t(7705),_=t(6304),k=t(8122),w=t(5861),C=t(3366),B=t(7462),S=t(6010),b=t(9766),y=t(4780),E=t(4867),M=t(182);let T=(0,M.ZP)();var P=t(5149),L=t(9707),R=t(6500),F=t(5408),G=t(8700);let D=["component","direction","spacing","divider","children","className"],K=(0,R.Z)(),O=T("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,n)=>n.root});function $(e){return(0,P.Z)({props:e,name:"MuiStack",defaultTheme:K})}let z=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],I=({ownerState:e,theme:n})=>{let t=(0,B.Z)({display:"flex",flexDirection:"column"},(0,F.k9)({theme:n},(0,F.P$)({values:e.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let a=(0,G.hB)(n),r=Object.keys(n.breakpoints.values).reduce((n,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(n[t]=!0),n),{}),i=(0,F.P$)({values:e.direction,base:r}),s=(0,F.P$)({values:e.spacing,base:r});"object"==typeof i&&Object.keys(i).forEach((e,n,t)=>{let a=i[e];if(!a){let a=n>0?i[t[n-1]]:"column";i[e]=a}});let o=(n,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${z(t?i[t]:e.direction)}`]:(0,G.NA)(a,n)}});t=(0,b.Z)(t,(0,F.k9)({theme:n},s,o))}return(0,F.dt)(n.breakpoints,t)},Q=function(e={}){let{createStyledComponent:n=O,useThemeProps:t=$,componentName:a="MuiStack"}=e,r=()=>(0,y.Z)({root:["root"]},e=>(0,E.Z)(a,e),{}),i=n(I),s=x.forwardRef(function(e,n){let a=t(e),s=(0,L.Z)(a),{component:o="div",direction:l="column",spacing:u=0,divider:d,children:m,className:p}=s,g=(0,C.Z)(s,D),h=r();return(0,c.jsx)(i,(0,B.Z)({as:o,ownerState:{direction:l,spacing:u},ref:n,className:(0,S.Z)(h.root,p)},g,{children:d?function(e,n){let t=x.Children.toArray(e).filter(Boolean);return t.reduce((e,a,r)=>(e.push(a),r<t.length-1&&e.push(x.cloneElement(n,{key:`separator-${r}`})),e),[])}(m,d):m}))});return s}();var V=t(7506),Y=t.n(V);function A(e){var n=e.reason;return(0,c.jsx)(h.Z,{"data-reason":n||null,className:j()(Y().container,Y().Empty)})}function X(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(Y().container,Y().WaitingStart),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры"}),(0,c.jsx)(Q,{className:Y().actions,spacing:2,direction:"row",children:t&&!!n&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function q(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(Y().container,Y().WaitingMulti),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Ищем соперника"}),(0,c.jsx)(w.Z,{variant:"body1",gutterBottom:!0,children:"Это может занять несколько минут."}),(0,c.jsx)(Q,{className:Y().actions,spacing:2,direction:"row",children:t&&!!n&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function H(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(Y().container,Y().WaitingSingle),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Запуск игры"}),(0,c.jsx)(Q,{className:Y().actions,spacing:2,direction:"row",children:t&&!!n&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function U(e){var n=e.onSingleClick,t=e.goToStartPage;return(0,c.jsxs)(h.Z,{className:j()(Y().container,Y().WaitingFailed),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Похоже, сейчас нет подходщих соперников"}),(0,c.jsx)(w.Z,{variant:"body1",gutterBottom:!0,children:"Вы можете сыграть самостоятельно и подняться в рейтинге"}),(0,c.jsxs)(Q,{className:Y().actions,spacing:2,direction:"row",children:[!!n&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Турнир для одного"})}),!!t&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:t,children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})]})]})}function J(e){var n=e.goToStartPage;return(0,c.jsxs)(h.Z,{className:j()(Y().container,Y().WasCancelled),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры был отменён"}),(0,c.jsx)(Q,{className:Y().actions,spacing:2,direction:"row",children:!!n&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]})}function ee(e){var n=e.partnerName;return(0,c.jsxs)(h.Z,{className:j()(Y().container,Y().GameReady),children:[(0,c.jsx)(w.Z,{variant:"h5",gutterBottom:!0,children:"Игра готова"}),n&&(0,c.jsxs)(w.Z,{variant:"body1",gutterBottom:!0,children:["Ваш партнёр: ",n]}),(0,c.jsx)(w.Z,{variant:"body1",gutterBottom:!0,children:"Игра запускается..."})]})}var en=t(1646),et=t(8356),ea=t(1799),er=t(9396),ei=t(5751),es=t(2171),eo=t(6447),ec=t(9724),el=t.n(ec),eu=t(3611),ed=t.n(eu),em=(0,et.qC)((r=(a={errorClassName:ed().error,wrapperClassName:ed().wrapper}).wrapperClassName,i=a.errorClassName,o=void 0===(s=a.showErrorInWrapper)||s,function(e){return function(n){var t=(0,ei.tP)(),a=(0,ei.lO)(),s=(0,ei.QL)(),l=(0,ei.e1)()||a,d=(0,ei.L8)(),m=(0,ei.xK)(),p=(0,ei.RS)(),f=(0,g.useRouter)(),N=x.useCallback(function(){f.push("/")},[f]);return(0,c.jsxs)("div",{className:j()(r,el().container),children:[o&&l&&(0,c.jsxs)(h.Z,{className:j()(el().contentErrorContainer),m:2,children:[(0,c.jsx)(w.Z,{className:j()(i,el().contentError),m:2,children:(0,es.VK)(l)}),(0,c.jsx)(eo.Z,{className:el().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:N,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!t&&(0,c.jsx)("div",{className:el().contentContainer,children:(0,c.jsx)(e,(0,er.Z)((0,ea.Z)({},n),{error:l,isLoading:s,isWaiting:d,isStarted:m,isFailed:p}))}),(s||d)&&(0,c.jsx)(u.uY,{className:el().smallLoader,spinnerSize:"medium",show:!0}),(0,c.jsx)(u.uY,{className:el().loaderSplash,show:t,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(e){var n=e.className,t=(0,p.oR)(),a=(0,v.TL)(),r=(0,g.useRouter)(),i=(0,v.u9)(),s=(0,v.gC)(),o=(0,v.aR)(),l=(0,v.QL)(),u=(0,v.L8)(),d=(0,v.vn)(),f=(0,v.xK)(),k=(0,v.RS)(),w=(0,v.it)(),C=!!s&&!!i,B=x.useCallback(function(){r.push("/")},[r]);x.useEffect(function(){C&&i&&s&&(0,_.Wh)(t)},[i,C,s,t]),x.useEffect(function(){C||N.Z.build.isDev||localStorage.getItem("gameParams:userName")||B()},[B,C,l,i,s,o]);var S=x.useCallback(function(){a(Z.Nw.setGameMode("single"))},[a]),b=(0,m.Z)(x.useState(!1),2),y=b[0],E=b[1],M=x.useCallback(function(){console.log("[WaitingBlock]: DEBUG: cancelWaiting"),(0,v.Io)(),a((0,en.M)()),a(W.Nw.resetData()),E(!0)},[a]),T=x.useMemo(function(){if(!C)return(0,c.jsx)(A,{reason:"Not ready"});if(f)return(0,c.jsx)(ee,{partnerName:w});if(k)return(0,c.jsx)(U,{onSingleClick:S,goToStartPage:B});if(y)return(0,c.jsx)(J,{goToStartPage:B});if(!u)return(0,c.jsx)(A,{reason:"Not waiting"});if(!d)return(0,c.jsx)(X,{cancelWaiting:M,isWaiting:!0});if("single"===o)return(0,c.jsx)(H,{cancelWaiting:M,isWaiting:!0});else return(0,c.jsx)(q,{cancelWaiting:M,isWaiting:!0})},[M,o,B,S,k,C,f,u,d,w,y]);return(0,c.jsx)(h.Z,{className:j()(n,Y().container),my:2,children:T})}),ex=function(){var e=(0,d.d)("Старт игры");return(0,c.jsx)(l.Z,{title:e,children:(0,c.jsx)(u.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,c.jsx)(em,{})})})}},2171:function(e,n,t){"use strict";function a(e){return[e.message].filter(Boolean).join(": ").replace(/^Error:\s*/,"")}t.d(n,{VK:function(){return a}}),t(5158)},7506:function(e){e.exports={container:"WaitingBlock_container__kQnxn"}},3611:function(e){e.exports={error:"WrappedWaitingBlock_error__M20nw",wrapper:"WrappedWaitingBlock_wrapper__2tBuN"}},9724:function(e){e.exports={container:"GameWaitingWrapper_container__YHwwm",contentError:"GameWaitingWrapper_contentError__nEGp2",contentContainer:"GameWaitingWrapper_contentContainer__B8_sf",smallLoader:"GameWaitingWrapper_smallLoader__7Kwnu",loaderSplash:"GameWaitingWrapper_loaderSplash__LjhsM"}}},function(e){e.O(0,[330,12,390,774,888,179],function(){return e(e.s=2329)}),_N_E=e.O()}]);
//# sourceMappingURL=waiting-6b2513bfc51abf72.js.map