(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{2329:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waiting",function(){return e(71)}])},6649:function(n,t,e){"use strict";e.d(t,{Io:function(){return a.Io},TL:function(){return i.T},aR:function(){return r.aR},tP:function(){return r.tP},u9:function(){return r.u9},gC:function(){return r.gC},dn:function(){return r.dn},RP:function(){return r.RP},it:function(){return r.it},iT:function(){return r.iT},RS:function(){return r.RS},VF:function(){return r.VF},QL:function(){return r.QL},L8:function(){return r.L8},vn:function(){return r.vn},V5:function(){return r.V5},k5:function(){return r.k5}});var r=e(215);e(6493);var i=e(7694);e(9232);var a=e(2866);e(9104)},71:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return ng}});var r,i,a,o,c,s=e(5893),l=e(2720),u=e(5409),d=e(7433),f=e(603),m=e(7294),g=e(1248),p=e(1163),x=e(7357),h=e(4184),j=e.n(h),_=e(6041),v=e(6649),W=e(9280),N=e(7705),C=e(1586),k=e(8122),Z=e(5861),y=e(3366),B=e(7462),S=e(6010),b=e(9766),w=e(4780),E=e(4867),T=e(182);let M=(0,T.ZP)();var R=e(5149),F=e(9707),P=e(6500),G=e(5408),L=e(8700);let V=["component","direction","spacing","divider","children","className"],A=(0,P.Z)(),D=M("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,t)=>t.root});function I(n){return(0,R.Z)({props:n,name:"MuiStack",defaultTheme:A})}let O=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],K=({ownerState:n,theme:t})=>{let e=(0,B.Z)({display:"flex",flexDirection:"column"},(0,G.k9)({theme:t},(0,G.P$)({values:n.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(n.spacing){let r=(0,L.hB)(t),i=Object.keys(t.breakpoints.values).reduce((t,e)=>(("object"==typeof n.spacing&&null!=n.spacing[e]||"object"==typeof n.direction&&null!=n.direction[e])&&(t[e]=!0),t),{}),a=(0,G.P$)({values:n.direction,base:i}),o=(0,G.P$)({values:n.spacing,base:i});"object"==typeof a&&Object.keys(a).forEach((n,t,e)=>{let r=a[n];if(!r){let r=t>0?a[e[t-1]]:"column";a[n]=r}});let c=(t,e)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${O(e?a[e]:n.direction)}`]:(0,L.NA)(r,t)}});e=(0,b.Z)(e,(0,G.k9)({theme:t},o,c))}return(0,G.dt)(t.breakpoints,e)},Q=function(n={}){let{createStyledComponent:t=D,useThemeProps:e=I,componentName:r="MuiStack"}=n,i=()=>(0,w.Z)({root:["root"]},n=>(0,E.Z)(r,n),{}),a=t(K),o=m.forwardRef(function(n,t){let r=e(n),o=(0,F.Z)(r),{component:c="div",direction:l="column",spacing:u=0,divider:d,children:f,className:g}=o,p=(0,y.Z)(o,V),x=i();return(0,s.jsx)(a,(0,B.Z)({as:c,ownerState:{direction:l,spacing:u},ref:t,className:(0,S.Z)(x.root,g)},p,{children:d?function(n,t){let e=m.Children.toArray(n).filter(Boolean);return e.reduce((n,r,i)=>(n.push(r),i<e.length-1&&n.push(m.cloneElement(t,{key:`separator-${i}`})),n),[])}(f,d):f}))});return o}();var $=e(9496),z=e.n($);function U(n){var t=n.reason;return(0,s.jsx)(x.Z,{"data-reason":t||null,className:j()(z().container,z().Empty),children:_.Z.build.isDev&&t&&(0,s.jsxs)(Z.Z,{variant:"body1",gutterBottom:!0,children:["WatingBlock Empty: ",t]})})}function X(n){var t=n.cancelWaiting,e=n.isWaiting;return(0,s.jsxs)(x.Z,{className:j()(z().container,z().WaitingStart),children:[(0,s.jsx)(Z.Z,{variant:"h5",gutterBottom:!0,children:"Запуск игры на сервере"}),(0,s.jsx)(Q,{className:z().actions,spacing:2,direction:"row",justifyContent:"center",children:e&&!!t&&(0,s.jsx)(k.Z,{className:"FixMuiButton",onClick:t,variant:"contained",children:(0,s.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function H(n){var t=n.cancelWaiting,e=n.isWaiting;return(0,s.jsxs)(x.Z,{className:j()(z().container,z().WaitingMulti),children:[(0,s.jsx)(Z.Z,{variant:"h5",gutterBottom:!0,children:"Ищем соперника"}),(0,s.jsx)(Z.Z,{variant:"body1",gutterBottom:!0,children:"Это может занять несколько минут."}),(0,s.jsx)(Q,{className:z().actions,spacing:2,direction:"row",justifyContent:"center",children:e&&!!t&&(0,s.jsx)(k.Z,{className:"FixMuiButton",onClick:t,variant:"contained",children:(0,s.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function Y(n){var t=n.cancelWaiting,e=n.isWaiting;return(0,s.jsxs)(x.Z,{className:j()(z().container,z().WaitingSingle),children:[(0,s.jsx)(Z.Z,{variant:"h5",gutterBottom:!0,children:"Запуск одиночной игры"}),(0,s.jsx)(Q,{className:z().actions,spacing:2,direction:"row",justifyContent:"center",children:e&&!!t&&(0,s.jsx)(k.Z,{className:"FixMuiButton",onClick:t,variant:"contained",children:(0,s.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function q(n){var t=n.onSingleClick,e=n.goToStartPage;return(0,s.jsxs)(x.Z,{className:j()(z().container,z().WaitingFailed),children:[(0,s.jsx)(Z.Z,{variant:"h5",gutterBottom:!0,children:"Похоже, сейчас нет подходщих соперников"}),(0,s.jsx)(Z.Z,{variant:"body1",gutterBottom:!0,children:"Вы можете сыграть самостоятельно и подняться в рейтинге"}),(0,s.jsxs)(Q,{className:z().actions,spacing:2,direction:"row",justifyContent:"center",children:[!!t&&(0,s.jsx)(k.Z,{className:"FixMuiButton",onClick:t,variant:"contained",children:(0,s.jsx)("span",{className:"Text",children:"Турнир для одного"})}),!!e&&(0,s.jsx)(k.Z,{className:"FixMuiButton",onClick:e,children:(0,s.jsx)("span",{className:"Text",children:"Начать сначала"})})]})]})}function J(n){var t=n.goToStartPage;return(0,s.jsxs)(x.Z,{className:j()(z().container,z().WasCancelled),children:[(0,s.jsx)(Z.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры был отменён"}),(0,s.jsx)(Q,{className:z().actions,spacing:2,direction:"row",justifyContent:"center",children:!!t&&(0,s.jsx)(k.Z,{className:"FixMuiButton",onClick:t,variant:"contained",children:(0,s.jsx)("span",{className:"Text",children:"Начать сначала"})})})]})}function nn(n){var t=n.partnerName,e=n.gameMode,r=n.startGameDelaySec;return(0,s.jsxs)(x.Z,{className:j()(z().container,z().GameReady),children:[(0,s.jsx)(Z.Z,{variant:"h5",gutterBottom:!0,children:"Ура! Соперник нашелся"}),(0,s.jsxs)(Z.Z,{variant:"body1",gutterBottom:!0,children:["Турнир",e&&_.Z.build.isDev&&" (в режиме "+e+")",t&&" с игроком "+t,r?" начнется через "+r+"  секунды":" сейчас начнётся","..."]})]})}var nt=e(7506),ne=e.n(nt),nr=e(8356),ni=e(1799),na=e(9396),no=e(215),nc=e(2171),ns=e(6447),nl=e(9724),nu=e.n(nl),nd=e(3611),nf=e.n(nd),nm=(0,nr.qC)((i=(r={errorClassName:nf().error,wrapperClassName:nf().wrapper}).wrapperClassName,a=r.errorClassName,c=void 0===(o=r.showErrorInWrapper)||o,function(n){return function(t){var e=(0,no.tP)(),r=(0,no.lO)(),o=(0,no.QL)(),l=(0,no.e1)()||r,d=(0,no.L8)(),f=(0,no.VF)(),g=(0,no.RS)(),h=(0,p.useRouter)(),_=m.useCallback(function(){h.push("/")},[h]);return(0,s.jsxs)("div",{className:j()(i,nu().container),children:[c&&l&&(0,s.jsxs)(x.Z,{className:j()(nu().contentErrorContainer),m:2,children:[(0,s.jsx)(Z.Z,{className:j()(a,nu().contentError),m:2,children:(0,nc.VK)(l)}),(0,s.jsx)(ns.Z,{className:nu().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,s.jsx)(k.Z,{className:"FixMuiButton",onClick:_,variant:"contained",children:(0,s.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!e&&(0,s.jsx)("div",{className:nu().contentContainer,children:(0,s.jsx)(n,(0,na.Z)((0,ni.Z)({},t),{error:l,isLoading:o,isWaiting:d,isStarted:f,isFailed:g}))}),(o||d)&&(0,s.jsx)(u.uY,{className:nu().smallLoader,spinnerSize:"medium",show:!0}),(0,s.jsx)(u.uY,{className:nu().loaderSplash,show:e,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(n){var t=n.className,e=(0,g.oR)(),r=(0,v.TL)(),i=(0,p.useRouter)(),a=(0,v.u9)(),o=(0,v.gC)(),c=(0,v.aR)(),l=(0,v.QL)(),u=(0,v.L8)(),d=(0,v.vn)(),h=(0,v.VF)(),k=(0,v.RS)(),Z=(0,v.V5)(),y=!!o&&!!a,B=m.useCallback(function(){i.push("/")},[i]),S=m.useCallback(function(){i.push("/game")},[i]);m.useEffect(function(){y&&h&&("multi"===c?setTimeout(S,3e3):S())},[S,y,h,c]),m.useEffect(function(){y&&(0,C.Wh)(e)},[y,e]),m.useEffect(function(){y||_.Z.build.isDev||localStorage.getItem("gameParams:userName")||B()},[B,y,l,a,o,c]);var b=m.useCallback(function(){r(W.Nw.setGameMode("single"))},[r]),w=(0,f.Z)(m.useState(!1),2),E=w[0],T=w[1],M=m.useCallback(function(){(0,v.Io)(),r((0,C.Mb)()),r(N.Nw.resetData()),T(!0)},[r]),R=m.useMemo(function(){if(!y)return(0,s.jsx)(U,{reason:"Not ready"});if(h)return(0,s.jsx)(nn,{partnerName:Z,gameMode:c});if(k)return(0,s.jsx)(q,{onSingleClick:b,goToStartPage:B});if(E)return(0,s.jsx)(J,{goToStartPage:B});if(!u)return(0,s.jsx)(U,{reason:"Not waiting"});if(!d)return(0,s.jsx)(X,{cancelWaiting:M,isWaiting:!0});if("single"===c)return(0,s.jsx)(Y,{cancelWaiting:M,isWaiting:!0});else return(0,s.jsx)(H,{cancelWaiting:M,isWaiting:!0})},[M,c,B,b,k,y,h,u,d,Z,E]);return(0,s.jsx)(x.Z,{className:j()(t,ne().container),my:2,children:R})}),ng=function(){var n=(0,d.d)("Старт игры");return(0,s.jsx)(l.Z,{title:n,children:(0,s.jsx)(u.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,s.jsx)(nm,{})})})}},2171:function(n,t,e){"use strict";function r(n){return[n.message].filter(Boolean).join(": ").replace(/^Error:\s*/,"")}e.d(t,{VK:function(){return r}}),e(5158)},7506:function(n){n.exports={container:"WaitingBlock_container__kQnxn"}},9496:function(n){n.exports={container:"WaitingBlockContent_container__AvQRT",Empty:"WaitingBlockContent_Empty___6Tvv",WaitingMulti:"WaitingBlockContent_WaitingMulti__IGH0K",WaitingSingle:"WaitingBlockContent_WaitingSingle__GOTv0",WaitingFailed:"WaitingBlockContent_WaitingFailed__X7Pa6",WasCancelled:"WaitingBlockContent_WasCancelled__HUBMl",GameReady:"WaitingBlockContent_GameReady__k3_SD",WaitingStart:"WaitingBlockContent_WaitingStart__6ah0V",DEBUG:"WaitingBlockContent_DEBUG__dXVaB",error:"WaitingBlockContent_error__mKOKG",actions:"WaitingBlockContent_actions__NE6aF"}},3611:function(n){n.exports={error:"WrappedWaitingBlock_error__M20nw",wrapper:"WrappedWaitingBlock_wrapper__2tBuN"}},9724:function(n){n.exports={container:"GameWaitingWrapper_container__YHwwm",contentError:"GameWaitingWrapper_contentError__nEGp2",contentContainer:"GameWaitingWrapper_contentContainer__B8_sf",smallLoader:"GameWaitingWrapper_smallLoader__7Kwnu",loaderSplash:"GameWaitingWrapper_loaderSplash__LjhsM"}},603:function(n,t,e){"use strict";function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function i(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n,t)||function(n,t){if(n){if("string"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(n,t)}}(n,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.d(t,{Z:function(){return i}})}},function(n){n.O(0,[509,12,390,774,888,179],function(){return n(n.s=2329)}),_N_E=n.O()}]);
//# sourceMappingURL=waiting-90a0b6ca67c8e740.js.map