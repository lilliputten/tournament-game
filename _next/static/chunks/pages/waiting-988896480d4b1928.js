(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{2329:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waiting",function(){return r(7720)}])},7720:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return em}});var t,i,a,s,o,c=r(5893),l=r(2720),u=r(5409),d=r(7433),m=r(603),x=r(7294),p=r(1248),h=r(1163),f=r(7357),g=r(4184),j=r.n(g),v=r(6041),N=r(5937),Z=r(9280),_=r(9739),k=r(3796),w=r(8122),C=r(5861),W=r(3366),B=r(7462),S=r(6010),b=r(9766),T=r(4780),E=r(4867),M=r(182);let F=(0,M.ZP)();var y=r(5149),P=r(9707),R=r(6500),G=r(5408),D=r(8700);let L=["component","direction","spacing","divider","children","className"],O=(0,R.Z)(),z=F("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,n)=>n.root});function V(e){return(0,y.Z)({props:e,name:"MuiStack",defaultTheme:O})}let $=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],X=({ownerState:e,theme:n})=>{let r=(0,B.Z)({display:"flex",flexDirection:"column"},(0,G.k9)({theme:n},(0,G.P$)({values:e.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let t=(0,D.hB)(n),i=Object.keys(n.breakpoints.values).reduce((n,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(n[r]=!0),n),{}),a=(0,G.P$)({values:e.direction,base:i}),s=(0,G.P$)({values:e.spacing,base:i});"object"==typeof a&&Object.keys(a).forEach((e,n,r)=>{let t=a[e];if(!t){let t=n>0?a[r[n-1]]:"column";a[e]=t}});let o=(n,r)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${$(r?a[r]:e.direction)}`]:(0,D.NA)(t,n)}});r=(0,b.Z)(r,(0,G.k9)({theme:n},s,o))}return(0,G.dt)(n.breakpoints,r)},Y=function(e={}){let{createStyledComponent:n=z,useThemeProps:r=V,componentName:t="MuiStack"}=e,i=()=>(0,T.Z)({root:["root"]},e=>(0,E.Z)(t,e),{}),a=n(X),s=x.forwardRef(function(e,n){let t=r(e),s=(0,P.Z)(t),{component:o="div",direction:l="column",spacing:u=0,divider:d,children:m,className:p}=s,h=(0,W.Z)(s,L),f=i();return(0,c.jsx)(a,(0,B.Z)({as:o,ownerState:{direction:l,spacing:u},ref:n,className:(0,S.Z)(f.root,p)},h,{children:d?function(e,n){let r=x.Children.toArray(e).filter(Boolean);return r.reduce((e,t,i)=>(e.push(t),i<r.length-1&&e.push(x.cloneElement(n,{key:`separator-${i}`})),e),[])}(m,d):m}))});return s}();var A=r(7506),H=r.n(A);function I(e){var n=e.cancelWaiting,r=e.isWaiting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры"}),(0,c.jsx)(Y,{className:H().actions,spacing:2,direction:"row",children:r&&!!n&&(0,c.jsx)(w.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function K(e){var n=e.cancelWaiting,r=e.isWaiting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Ищем соперника"}),(0,c.jsx)(C.Z,{variant:"body1",gutterBottom:!0,children:"Это может занять несколько минут."}),(0,c.jsx)(Y,{className:H().actions,spacing:2,direction:"row",children:r&&!!n&&(0,c.jsx)(w.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function q(e){var n=e.cancelWaiting,r=e.isWaiting;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Запуск игры"}),(0,c.jsx)(Y,{className:H().actions,spacing:2,direction:"row",children:r&&!!n&&(0,c.jsx)(w.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function Q(e){var n=e.onSingleClick,r=e.goToStartPage;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Похоже, сейчас нет подходщих соперников"}),(0,c.jsx)(C.Z,{variant:"body1",gutterBottom:!0,children:"Вы можете сыграть самостоятельно и подняться в рейтинге"}),(0,c.jsxs)(Y,{className:H().actions,spacing:2,direction:"row",children:[!!n&&(0,c.jsx)(w.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Турнир для одного"})}),!!r&&(0,c.jsx)(w.Z,{className:"FixMuiButton",onClick:r,children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})]})]})}function U(e){var n=e.goToStartPage;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры был отменён"}),(0,c.jsx)(Y,{className:H().actions,spacing:2,direction:"row",children:!!n&&(0,c.jsx)(w.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]})}function J(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Игра готова"})})}var ee=r(2742),en=r(8356),er=r(1799),et=r(9396),ei=r(5751),ea=r(2171),es=r(6447),eo=r(542),ec=r.n(eo),el=r(3611),eu=r.n(el),ed=(0,en.qC)((i=(t={errorClassName:eu().error,wrapperClassName:eu().wrapper}).wrapperClassName,a=t.errorClassName,o=void 0===(s=t.showErrorInWrapper)||s,function(e){return function(n){var r=(0,ei.tP)(),t=(0,ei.lO)(),s=(0,ei.YH)(),l=(0,ei.X4)()||t,d=(0,ei.me)(),m=(0,ei.Vp)(),p=(0,ei.Rb)(),g=(0,h.useRouter)(),v=x.useCallback(function(){g.push("/")},[g]);return(0,c.jsxs)("div",{className:j()(i,ec().container),children:[o&&l&&(0,c.jsxs)(f.Z,{className:j()(ec().contentErrorContainer),m:2,children:[(0,c.jsx)(C.Z,{className:j()(a,ec().contentError),m:2,children:(0,ea.VK)(l)}),(0,c.jsx)(es.Z,{className:ec().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,c.jsx)(w.Z,{className:"FixMuiButton",onClick:v,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!r&&(0,c.jsx)("div",{className:ec().contentContainer,children:(0,c.jsx)(e,(0,et.Z)((0,er.Z)({},n),{error:l,isLoading:s,isWaiting:d,isStarted:m,isFailed:p}))}),(s||d)&&(0,c.jsx)(u.uY,{className:ec().smallLoader,spinnerSize:"medium",show:!0}),(0,c.jsx)(u.uY,{className:ec().loaderSplash,show:r,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(e){var n=e.className,r=(0,p.oR)(),t=(0,N.TL)(),i=(0,h.useRouter)(),a=(0,N.u9)(),s=(0,N.gC)(),o=(0,N.aR)(),l=(0,N.YH)(),u=(0,N.me)(),d=(0,N.Mh)(),g=(0,N.Vp)(),w=(0,N.Rb)(),C=!!s&&!!a,W=x.useCallback(function(){i.push("/")},[i]);x.useEffect(function(){C&&a&&s&&(0,k.Wh)(r)},[a,C,s,r]),x.useEffect(function(){C||v.Z.build.isDev||W()},[W,C,l,a,s,o]);var B=x.useCallback(function(){t(Z.Nw.setGameMode("single"))},[t]),S=(0,m.Z)(x.useState(!1),2),b=S[0],T=S[1],E=x.useCallback(function(){console.log("[WaitingBlock]: DEBUG: cancelWaiting"),(0,N.Io)(),t((0,ee.M)()),t(_.Nw.resetData()),T(!0)},[t]),M=x.useMemo(function(){if(!C)return null;if(g)return(0,c.jsx)(J,{});if(w)return(0,c.jsx)(Q,{onSingleClick:B,goToStartPage:W});if(b)return(0,c.jsx)(U,{goToStartPage:W});if(!u)return null;if(!d)return(0,c.jsx)(I,{cancelWaiting:E,isWaiting:!0});if("single"===o)return(0,c.jsx)(q,{cancelWaiting:E,isWaiting:!0});else return(0,c.jsx)(K,{cancelWaiting:E,isWaiting:!0})},[E,o,W,B,w,C,g,u,d,b]);return(0,c.jsx)(f.Z,{className:j()(n,H().container),my:2,children:M})}),em=function(){var e=(0,d.d)("Старт игры");return(0,c.jsx)(l.Z,{title:e,children:(0,c.jsx)(u.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,c.jsx)(ed,{})})})}},2171:function(e,n,r){"use strict";function t(e){return[e.message].filter(Boolean).join(": ").replace(/^Error:\s*/,"")}r.d(n,{VK:function(){return t}}),r(5158)},7506:function(e){e.exports={container:"WaitingBlock_container__kQnxn"}},3611:function(e){e.exports={error:"WrappedWaitingBlock_error__M20nw",wrapper:"WrappedWaitingBlock_wrapper__2tBuN"}},542:function(e){e.exports={container:"GameSessionWrapper_container__aDk9O",contentError:"GameSessionWrapper_contentError__ATjRz",contentContainer:"GameSessionWrapper_contentContainer__9ZWe_",smallLoader:"GameSessionWrapper_smallLoader__MetXT",loaderSplash:"GameSessionWrapper_loaderSplash__61cgZ"}}},function(e){e.O(0,[330,12,390,774,888,179],function(){return e(e.s=2329)}),_N_E=e.O()}]);
//# sourceMappingURL=waiting-988896480d4b1928.js.map