(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{2329:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waiting",function(){return t(71)}])},71:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return ng}});var i,a,r,s,o,c=t(5893),l=t(2720),u=t(5409),d=t(7433),m=t(603),f=t(7294),g=t(1248),p=t(1163),x=t(7357),h=t(4184),j=t.n(h),_=t(6041),W=t(6649),N=t(9280),v=t(7705),C=t(1586),k=t(8122),Z=t(5861),y=t(3366),S=t(7462),w=t(6010),B=t(9766),b=t(4780),E=t(4867),M=t(182);let T=(0,M.ZP)();var G=t(5149),F=t(9707),R=t(6500),P=t(5408),L=t(8700);let A=["component","direction","spacing","divider","children","className"],D=(0,R.Z)(),O=T("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function I(n){return(0,G.Z)({props:n,name:"MuiStack",defaultTheme:D})}let V=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],$=({ownerState:n,theme:e})=>{let t=(0,S.Z)({display:"flex",flexDirection:"column"},(0,P.k9)({theme:e},(0,P.P$)({values:n.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n})));if(n.spacing){let i=(0,L.hB)(e),a=Object.keys(e.breakpoints.values).reduce((e,t)=>(("object"==typeof n.spacing&&null!=n.spacing[t]||"object"==typeof n.direction&&null!=n.direction[t])&&(e[t]=!0),e),{}),r=(0,P.P$)({values:n.direction,base:a}),s=(0,P.P$)({values:n.spacing,base:a});"object"==typeof r&&Object.keys(r).forEach((n,e,t)=>{let i=r[n];if(!i){let i=e>0?r[t[e-1]]:"column";r[n]=i}});let o=(e,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${V(t?r[t]:n.direction)}`]:(0,L.NA)(i,e)}});t=(0,B.Z)(t,(0,P.k9)({theme:e},s,o))}return(0,P.dt)(e.breakpoints,t)},K=function(n={}){let{createStyledComponent:e=O,useThemeProps:t=I,componentName:i="MuiStack"}=n,a=()=>(0,b.Z)({root:["root"]},n=>(0,E.Z)(i,n),{}),r=e($),s=f.forwardRef(function(n,e){let i=t(n),s=(0,F.Z)(i),{component:o="div",direction:l="column",spacing:u=0,divider:d,children:m,className:g}=s,p=(0,y.Z)(s,A),x=a();return(0,c.jsx)(r,(0,S.Z)({as:o,ownerState:{direction:l,spacing:u},ref:e,className:(0,w.Z)(x.root,g)},p,{children:d?function(n,e){let t=f.Children.toArray(n).filter(Boolean);return t.reduce((n,i,a)=>(n.push(i),a<t.length-1&&n.push(f.cloneElement(e,{key:`separator-${a}`})),n),[])}(m,d):m}))});return s}();var z=t(9496),Q=t.n(z);function U(n){var e=n.reason;return(0,c.jsx)(x.Z,{"data-reason":e||null,className:j()(Q().container,Q().Empty),children:_.Z.build.isDev&&e&&(0,c.jsxs)(Z.Z,{children:["WatingBlock Empty: ",e]})})}function X(n){var e=n.cancelWaiting,t=n.isWaiting;return(0,c.jsxs)(x.Z,{className:j()(Q().container,Q().WaitingStart),children:[(0,c.jsx)(Z.Z,{variant:"h5",children:"Запуск игры на сервере"}),(0,c.jsx)(K,{className:Q().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!e&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function H(n){var e=n.cancelWaiting,t=n.isWaiting;return(0,c.jsxs)(x.Z,{className:j()(Q().container,Q().WaitingMulti),children:[(0,c.jsx)(Z.Z,{variant:"h5",children:"Ищем соперника"}),(0,c.jsx)(Z.Z,{children:"Это может занять несколько минут."}),(0,c.jsx)(K,{className:Q().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!e&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function Y(n){var e=n.cancelWaiting,t=n.isWaiting;return(0,c.jsxs)(x.Z,{className:j()(Q().container,Q().WaitingSingle),children:[(0,c.jsx)(Z.Z,{variant:"h5",children:"Запуск одиночной игры"}),(0,c.jsx)(K,{className:Q().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!e&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function q(n){var e=n.onSingleClick,t=n.goToStartPage;return(0,c.jsxs)(x.Z,{className:j()(Q().container,Q().WaitingFailed),children:[(0,c.jsx)(Z.Z,{variant:"h5",children:"Похоже, сейчас нет подходщих соперников"}),(0,c.jsx)(Z.Z,{children:"Вы можете сыграть самостоятельно и подняться в рейтинге"}),(0,c.jsxs)(K,{className:Q().actions,spacing:2,direction:"row",justifyContent:"center",children:[!!e&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Турнир для одного"})}),!!t&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:t,children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})]})]})}function J(n){var e=n.goToStartPage;return(0,c.jsxs)(x.Z,{className:j()(Q().container,Q().WasCancelled),children:[(0,c.jsx)(Z.Z,{variant:"h5",children:"Старт игры был отменён"}),(0,c.jsx)(K,{className:Q().actions,spacing:2,direction:"row",justifyContent:"center",children:!!e&&(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]})}function nn(n){var e=n.partnerName,t=n.gameMode,i=n.startGameDelaySec;return(0,c.jsxs)(x.Z,{className:j()(Q().container,Q().GameReady),children:[(0,c.jsx)(Z.Z,{variant:"h5",children:"Ура! Соперник нашелся"}),(0,c.jsxs)(Z.Z,{children:["Турнир",t&&_.Z.build.isDev&&" (в режиме "+t+")",e&&" с игроком "+e,i?" начнется через "+i+"  секунды":" сейчас начнётся","..."]})]})}var ne=t(7506),nt=t.n(ne),ni=t(8356),na=t(1799),nr=t(9396),ns=t(215),no=t(2171),nc=t(6447),nl=t(9724),nu=t.n(nl),nd=t(3611),nm=t.n(nd),nf=(0,ni.qC)((a=(i={errorClassName:nm().error,wrapperClassName:nm().wrapper}).wrapperClassName,r=i.errorClassName,o=void 0===(s=i.showErrorInWrapper)||s,function(n){return function(e){var t=(0,ns.tP)(),i=(0,ns.lO)(),s=(0,ns.QL)(),l=(0,ns.e1)()||i,d=(0,ns.L8)(),m=(0,ns.VF)(),g=(0,ns.RS)(),h=(0,p.useRouter)(),_=f.useCallback(function(){h.push("/")},[h]);return(0,c.jsxs)("div",{className:j()(a,nu().container),children:[o&&l&&(0,c.jsxs)(x.Z,{className:j()(nu().contentErrorContainer),m:2,children:[(0,c.jsx)(Z.Z,{className:j()(r,nu().contentError),m:2,children:(0,no.VK)(l)}),(0,c.jsx)(nc.Z,{className:nu().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,c.jsx)(k.Z,{className:"FixMuiButton",onClick:_,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!t&&(0,c.jsx)("div",{className:nu().contentContainer,children:(0,c.jsx)(n,(0,nr.Z)((0,na.Z)({},e),{error:l,isLoading:s,isWaiting:d,isStarted:m,isFailed:g}))}),(s||d)&&(0,c.jsx)(u.uY,{className:nu().smallLoader,spinnerSize:"medium",show:!0}),(0,c.jsx)(u.uY,{className:nu().loaderSplash,show:t,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(n){var e=n.className,t=(0,g.oR)(),i=(0,W.TL)(),a=(0,p.useRouter)(),r=(0,W.u9)(),s=(0,W.gC)(),o=(0,W.aR)(),l=(0,W.QL)(),u=(0,W.L8)(),d=(0,W.vn)(),h=(0,W.VF)(),k=(0,W.RS)(),Z=(0,W.V5)(),y=!!s&&!!r,S=f.useCallback(function(){a.push("/")},[a]),w=f.useCallback(function(){a.push("/game")},[a]);f.useEffect(function(){y&&h&&("multi"===o?setTimeout(w,3e3):w())},[w,y,h,o]),f.useEffect(function(){y&&(0,C.Wh)(t)},[y,t]),f.useEffect(function(){y||_.Z.build.isDev||localStorage.getItem("gameParams:userName")||S()},[S,y,l,r,s,o]);var B=f.useCallback(function(){i(N.Nw.setGameMode("single"))},[i]),b=(0,m.Z)(f.useState(!1),2),E=b[0],M=b[1],T=f.useCallback(function(){(0,W.Io)(),i((0,C.Mb)()),i(v.Nw.resetData()),M(!0)},[i]),G=f.useMemo(function(){if(!y)return(0,c.jsx)(U,{reason:"Not ready"});if(h)return(0,c.jsx)(nn,{partnerName:Z,gameMode:o});if(k)return(0,c.jsx)(q,{onSingleClick:B,goToStartPage:S});if(E)return(0,c.jsx)(J,{goToStartPage:S});if(!u)return(0,c.jsx)(U,{reason:"Not waiting"});if(!d)return(0,c.jsx)(X,{cancelWaiting:T,isWaiting:!0});if("single"===o)return(0,c.jsx)(Y,{cancelWaiting:T,isWaiting:!0});else return(0,c.jsx)(H,{cancelWaiting:T,isWaiting:!0})},[T,o,S,B,k,y,h,u,d,Z,E]);return(0,c.jsx)(x.Z,{className:j()(e,nt().container),my:2,children:G})}),ng=function(){var n=(0,d.d)("Старт игры");return(0,c.jsx)(l.Z,{title:n,children:(0,c.jsx)(u.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,c.jsx)(nf,{})})})}},7506:function(n){n.exports={container:"WaitingBlock_container__kQnxn"}},9496:function(n){n.exports={container:"WaitingBlockContent_container__AvQRT",Empty:"WaitingBlockContent_Empty___6Tvv",WaitingMulti:"WaitingBlockContent_WaitingMulti__IGH0K",WaitingSingle:"WaitingBlockContent_WaitingSingle__GOTv0",WaitingFailed:"WaitingBlockContent_WaitingFailed__X7Pa6",WasCancelled:"WaitingBlockContent_WasCancelled__HUBMl",GameReady:"WaitingBlockContent_GameReady__k3_SD",WaitingStart:"WaitingBlockContent_WaitingStart__6ah0V",DEBUG:"WaitingBlockContent_DEBUG__dXVaB",error:"WaitingBlockContent_error__mKOKG",actions:"WaitingBlockContent_actions__NE6aF"}},3611:function(n){n.exports={error:"WrappedWaitingBlock_error__M20nw",wrapper:"WrappedWaitingBlock_wrapper__2tBuN"}},9724:function(n){n.exports={container:"GameWaitingWrapper_container__YHwwm",contentError:"GameWaitingWrapper_contentError__nEGp2",contentContainer:"GameWaitingWrapper_contentContainer__B8_sf",smallLoader:"GameWaitingWrapper_smallLoader__7Kwnu",loaderSplash:"GameWaitingWrapper_loaderSplash__LjhsM"}},603:function(n,e,t){"use strict";function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n,e)||function(n,e){if(n){if("string"==typeof n)return i(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(n,e)}}(n,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(e,{Z:function(){return a}})}},function(n){n.O(0,[509,12,390,705,774,888,179],function(){return n(n.s=2329)}),_N_E=n.O()}]);
//# sourceMappingURL=waiting-b25a7b48aff05750.js.map