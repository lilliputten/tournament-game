(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{9211:function(n,e,t){"use strict";t.d(e,{Z:function(){return k}});var i=t(3366),r=t(7462),a=t(7294),o=t(6010),s=t(9766),c=t(4780),l=t(4867),u=t(182);let d=(0,u.ZP)();var m=t(5149),f=t(9707),g=t(6500),p=t(5408),x=t(8700),h=t(5893);let j=["component","direction","spacing","divider","children","className"],_=(0,g.Z)(),v=d("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function W(n){return(0,m.Z)({props:n,name:"MuiStack",defaultTheme:_})}let N=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],Z=({ownerState:n,theme:e})=>{let t=(0,r.Z)({display:"flex",flexDirection:"column"},(0,p.k9)({theme:e},(0,p.P$)({values:n.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n})));if(n.spacing){let i=(0,x.hB)(e),r=Object.keys(e.breakpoints.values).reduce((e,t)=>(("object"==typeof n.spacing&&null!=n.spacing[t]||"object"==typeof n.direction&&null!=n.direction[t])&&(e[t]=!0),e),{}),a=(0,p.P$)({values:n.direction,base:r}),o=(0,p.P$)({values:n.spacing,base:r});"object"==typeof a&&Object.keys(a).forEach((n,e,t)=>{let i=a[n];if(!i){let i=e>0?a[t[e-1]]:"column";a[n]=i}});let c=(e,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${N(t?a[t]:n.direction)}`]:(0,x.NA)(i,e)}});t=(0,s.Z)(t,(0,p.k9)({theme:e},o,c))}return(0,p.dt)(e.breakpoints,t)},C=function(n={}){let{createStyledComponent:e=v,useThemeProps:t=W,componentName:s="MuiStack"}=n,u=()=>(0,c.Z)({root:["root"]},n=>(0,l.Z)(s,n),{}),d=e(Z),m=a.forwardRef(function(n,e){let s=t(n),c=(0,f.Z)(s),{component:l="div",direction:m="column",spacing:g=0,divider:p,children:x,className:_}=c,v=(0,i.Z)(c,j),W=u();return(0,h.jsx)(d,(0,r.Z)({as:l,ownerState:{direction:m,spacing:g},ref:e,className:(0,o.Z)(W.root,_)},v,{children:p?function(n,e){let t=a.Children.toArray(n).filter(Boolean);return t.reduce((n,i,r)=>(n.push(i),r<t.length-1&&n.push(a.cloneElement(e,{key:`separator-${r}`})),n),[])}(x,p):x}))});return m}();var k=C},2329:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waiting",function(){return t(7582)}])},7582:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return A}});var i=t(5893),r=t(2720),a=t(5409),o=t(7433),s=t(603),c=t(7294),l=t(1248),u=t(1163),d=t(7357),m=t(4184),f=t.n(m),g=t(6041),p=t(6649),x=t(9280),h=t(7705),j=t(1586),_=t(8122),v=t(5861),W=t(9211),N=t(9496),Z=t.n(N);function C(n){var e=n.reason;return(0,i.jsx)(d.Z,{"data-reason":e||null,className:f()(Z().container,Z().Empty),children:g.Z.build.isDev&&e&&(0,i.jsxs)(v.Z,{children:["WatingBlock Empty: ",e]})})}function k(n){var e=n.cancelWaiting,t=n.isWaiting;return(0,i.jsxs)(d.Z,{className:f()(Z().container,Z().WaitingStart),children:[(0,i.jsx)(v.Z,{variant:"h5",gutterBottom:!0,children:"Запуск игры на сервере"}),(0,i.jsx)(W.Z,{className:Z().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!e&&(0,i.jsx)(_.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,i.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function y(n){var e=n.cancelWaiting,t=n.isWaiting;return(0,i.jsxs)(d.Z,{className:f()(Z().container,Z().WaitingMulti),children:[(0,i.jsx)(v.Z,{variant:"h5",gutterBottom:!0,children:"Ищем соперника"}),(0,i.jsx)(v.Z,{gutterBottom:!0,children:"Это может занять несколько минут."}),(0,i.jsx)(W.Z,{className:Z().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!e&&(0,i.jsx)(_.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,i.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function B(n){var e=n.cancelWaiting,t=n.isWaiting;return(0,i.jsxs)(d.Z,{className:f()(Z().container,Z().WaitingSingle),children:[(0,i.jsx)(v.Z,{variant:"h5",gutterBottom:!0,children:"Запуск одиночной игры"}),(0,i.jsx)(W.Z,{className:Z().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!e&&(0,i.jsx)(_.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,i.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function S(n){var e=n.onSingleClick,t=n.goToStartPage;return(0,i.jsxs)(d.Z,{className:f()(Z().container,Z().WaitingFailed),children:[(0,i.jsx)(v.Z,{variant:"h5",gutterBottom:!0,children:"Похоже, сейчас нет подходщих соперников"}),(0,i.jsx)(v.Z,{gutterBottom:!0,children:"Вы можете сыграть самостоятельно и подняться в рейтинге"}),(0,i.jsxs)(W.Z,{className:Z().actions,spacing:2,direction:"row",justifyContent:"center",children:[!!e&&(0,i.jsx)(_.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,i.jsx)("span",{className:"Text",children:"Турнир для одного"})}),!!t&&(0,i.jsx)(_.Z,{className:"FixMuiButton",onClick:t,children:(0,i.jsx)("span",{className:"Text",children:"Начать сначала"})})]})]})}function w(n){var e=n.goToStartPage;return(0,i.jsxs)(d.Z,{className:f()(Z().container,Z().WasCancelled),children:[(0,i.jsx)(v.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры был отменён"}),(0,i.jsx)(W.Z,{className:Z().actions,spacing:2,direction:"row",justifyContent:"center",children:!!e&&(0,i.jsx)(_.Z,{className:"FixMuiButton",onClick:e,variant:"contained",children:(0,i.jsx)("span",{className:"Text",children:"Начать сначала"})})})]})}function b(n){var e=n.partnerName,t=n.gameMode,r=n.startGameDelaySec;return(0,i.jsxs)(d.Z,{className:f()(Z().container,Z().GameReady),children:[(0,i.jsx)(v.Z,{variant:"h5",gutterBottom:!0,children:"multi"===t?"Ура! Соперник нашёлся":"Всё готово!"}),(0,i.jsxs)(v.Z,{gutterBottom:!0,children:["Турнир",t&&g.Z.build.isDev&&" (в режиме "+t+")",e&&" с игроком "+e,r?" начнется через "+r+"  секунды":" сейчас начнётся","..."]})]})}var E=t(7506),M=t.n(E),T=t(8356),G=t(3514),R=t(3611),F=t.n(R),P=(0,T.qC)((0,G.O)({errorClassName:F().error,wrapperClassName:F().wrapper}))(function(n){var e=n.className,t=(0,l.oR)(),r=(0,p.TL)(),a=(0,u.useRouter)(),o=(0,p.u9)(),m=(0,p.gC)(),_=(0,p.aR)(),v=(0,p.QL)(),W=(0,p.L8)(),N=(0,p.vn)(),Z=(0,p.po)(),E=(0,p.RS)(),T=(0,p.V5)(),G=!!m&&!!o,R=c.useCallback(function(){a.push("/")},[a]),F=c.useCallback(function(){a.push("/game")},[a]);c.useEffect(function(){G&&Z&&("multi"===_?setTimeout(F,3e3):F())},[F,G,Z,_]),c.useEffect(function(){G&&(0,j.Wh)(t)},[G,t]),c.useEffect(function(){G||g.Z.build.isDev||localStorage.getItem("gameParams:userName")||R()},[R,G,v,o,m,_]);var P=c.useCallback(function(){r(x.Nw.setGameMode("single"))},[r]),A=(0,s.Z)(c.useState(!1),2),L=A[0],O=A[1],D=c.useCallback(function(){(0,p.Io)(),r((0,j.Mb)()),r(h.Nw.resetData()),O(!0)},[r]),I=c.useMemo(function(){if(!G)return(0,i.jsx)(C,{reason:"Not ready"});if(Z)return(0,i.jsx)(b,{partnerName:T,gameMode:_});if(E)return(0,i.jsx)(S,{onSingleClick:P,goToStartPage:R});if(L)return(0,i.jsx)(w,{goToStartPage:R});if(!W)return(0,i.jsx)(C,{reason:"Not waiting"});if(!N)return(0,i.jsx)(k,{cancelWaiting:D,isWaiting:!0});if("single"===_)return(0,i.jsx)(B,{cancelWaiting:D,isWaiting:!0});else return(0,i.jsx)(y,{cancelWaiting:D,isWaiting:!0})},[D,_,R,P,E,G,Z,W,N,T,L]);return(0,i.jsx)(d.Z,{className:f()(e,M().container),my:2,children:I})}),A=function(){var n=(0,o.d)("Старт игры");return(0,i.jsx)(r.Z,{title:n,children:(0,i.jsx)(a.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,i.jsx)(P,{})})})}},3514:function(n,e,t){"use strict";t.d(e,{O:function(){return _}});var i=t(1799),r=t(9396),a=t(5893),o=t(7294),s=t(1163),c=t(4184),l=t.n(c),u=t(215),d=t(2171),m=t(5409),f=t(7357),g=t(5861),p=t(6447),x=t(8122),h=t(9724),j=t.n(h);function _(n){var e=n.wrapperClassName,t=n.errorClassName,c=n.showErrorInWrapper,h=void 0===c||c;return function(n){return function(c){var _=(0,u.tP)(),v=(0,u.lO)(),W=(0,u.QL)(),N=(0,u.e1)()||v;o.useEffect(function(){N&&m.Am.error((0,d.VK)(N))},[N]);var Z=(0,u.L8)(),C=(0,u.po)(),k=(0,u.RS)(),y=(0,s.useRouter)(),B=o.useCallback(function(){y.push("/")},[y]);return(0,a.jsxs)("div",{className:l()(e,j().container),children:[h&&N&&(0,a.jsxs)(f.Z,{className:l()(j().contentErrorContainer),m:2,children:[(0,a.jsx)(g.Z,{className:l()(t,j().contentError),m:2,children:(0,d.VK)(N)}),(0,a.jsx)(p.Z,{className:j().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,a.jsx)(x.Z,{className:"FixMuiButton",onClick:B,variant:"contained",children:(0,a.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!_&&(0,a.jsx)("div",{className:j().contentContainer,children:(0,a.jsx)(n,(0,r.Z)((0,i.Z)({},c),{error:N,isLoading:W,isWaiting:Z,isStarted:C,isFailed:k}))}),(W||Z)&&(0,a.jsx)(m.uY,{className:j().smallLoader,spinnerSize:"medium",show:!0}),(0,a.jsx)(m.uY,{className:j().loaderSplash,show:_,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}}},7506:function(n){n.exports={container:"WaitingBlock_container__kQnxn"}},9496:function(n){n.exports={container:"WaitingBlockContent_container__AvQRT",Empty:"WaitingBlockContent_Empty___6Tvv",WaitingMulti:"WaitingBlockContent_WaitingMulti__IGH0K",WaitingSingle:"WaitingBlockContent_WaitingSingle__GOTv0",WaitingFailed:"WaitingBlockContent_WaitingFailed__X7Pa6",WasCancelled:"WaitingBlockContent_WasCancelled__HUBMl",GameReady:"WaitingBlockContent_GameReady__k3_SD",WaitingStart:"WaitingBlockContent_WaitingStart__6ah0V",DEBUG:"WaitingBlockContent_DEBUG__dXVaB",error:"WaitingBlockContent_error__mKOKG",actions:"WaitingBlockContent_actions__NE6aF"}},3611:function(n){n.exports={error:"WrappedWaitingBlock_error__M20nw",wrapper:"WrappedWaitingBlock_wrapper__2tBuN"}},9724:function(n){n.exports={container:"GameWaitingWrapper_container__YHwwm",contentError:"GameWaitingWrapper_contentError__nEGp2",contentContainer:"GameWaitingWrapper_contentContainer__B8_sf",smallLoader:"GameWaitingWrapper_smallLoader__7Kwnu",loaderSplash:"GameWaitingWrapper_loaderSplash__LjhsM"}},603:function(n,e,t){"use strict";function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function r(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n,e)||function(n,e){if(n){if("string"==typeof n)return i(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(n,e)}}(n,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(e,{Z:function(){return r}})}},function(n){n.O(0,[911,766,390,705,774,888,179],function(){return n(n.s=2329)}),_N_E=n.O()}]);
//# sourceMappingURL=waiting-b62cda8099d3c173.js.map