(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{6447:function(e,n,t){"use strict";var i=t(3366),r=t(7462),a=t(7294),o=t(5408),s=t(8700),c=t(9707),l=t(9766),u=t(948),d=t(1657),m=t(5893);let f=["component","direction","spacing","divider","children"],p=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],g=({ownerState:e,theme:n})=>{let t=(0,r.Z)({display:"flex",flexDirection:"column"},(0,o.k9)({theme:n},(0,o.P$)({values:e.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let i=(0,s.hB)(n),r=Object.keys(n.breakpoints.values).reduce((n,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(n[t]=!0),n),{}),a=(0,o.P$)({values:e.direction,base:r}),c=(0,o.P$)({values:e.spacing,base:r});"object"==typeof a&&Object.keys(a).forEach((e,n,t)=>{let i=a[e];if(!i){let i=n>0?a[t[n-1]]:"column";a[e]=i}});let u=(n,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${p(t?a[t]:e.direction)}`]:(0,s.NA)(i,n)}});t=(0,l.Z)(t,(0,o.k9)({theme:n},c,u))}return(0,o.dt)(n.breakpoints,t)},h=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,n)=>[n.root]})(g),x=a.forwardRef(function(e,n){let t=(0,d.Z)({props:e,name:"MuiStack"}),o=(0,c.Z)(t),{component:s="div",direction:l="column",spacing:u=0,divider:p,children:g}=o,x=(0,i.Z)(o,f);return(0,m.jsx)(h,(0,r.Z)({as:s,ownerState:{direction:l,spacing:u},ref:n},x,{children:p?function(e,n){let t=a.Children.toArray(e).filter(Boolean);return t.reduce((e,i,r)=>(e.push(i),r<t.length-1&&e.push(a.cloneElement(n,{key:`separator-${r}`})),e),[])}(g,p):g}))});n.Z=x},9211:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var i=t(3366),r=t(7462),a=t(7294),o=t(6010),s=t(9766),c=t(4780),l=t(4867),u=t(182);let d=(0,u.ZP)();var m=t(5149),f=t(9707),p=t(6500),g=t(5408),h=t(8700),x=t(5893);let j=["component","direction","spacing","divider","children","className"],_=(0,p.Z)(),v=d("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,n)=>n.root});function Z(e){return(0,m.Z)({props:e,name:"MuiStack",defaultTheme:_})}let k=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],N=({ownerState:e,theme:n})=>{let t=(0,r.Z)({display:"flex",flexDirection:"column"},(0,g.k9)({theme:n},(0,g.P$)({values:e.direction,breakpoints:n.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let i=(0,h.hB)(n),r=Object.keys(n.breakpoints.values).reduce((n,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(n[t]=!0),n),{}),a=(0,g.P$)({values:e.direction,base:r}),o=(0,g.P$)({values:e.spacing,base:r});"object"==typeof a&&Object.keys(a).forEach((e,n,t)=>{let i=a[e];if(!i){let i=n>0?a[t[n-1]]:"column";a[e]=i}});let c=(n,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${k(t?a[t]:e.direction)}`]:(0,h.NA)(i,n)}});t=(0,s.Z)(t,(0,g.k9)({theme:n},o,c))}return(0,g.dt)(n.breakpoints,t)},W=function(e={}){let{createStyledComponent:n=v,useThemeProps:t=Z,componentName:s="MuiStack"}=e,u=()=>(0,c.Z)({root:["root"]},e=>(0,l.Z)(s,e),{}),d=n(N),m=a.forwardRef(function(e,n){let s=t(e),c=(0,f.Z)(s),{component:l="div",direction:m="column",spacing:p=0,divider:g,children:h,className:_}=c,v=(0,i.Z)(c,j),Z=u();return(0,x.jsx)(d,(0,r.Z)({as:l,ownerState:{direction:m,spacing:p},ref:n,className:(0,o.Z)(Z.root,_)},v,{children:g?function(e,n){let t=a.Children.toArray(e).filter(Boolean);return t.reduce((e,i,r)=>(e.push(i),r<t.length-1&&e.push(a.cloneElement(n,{key:`separator-${r}`})),e),[])}(h,g):h}))});return m}();var C=W},2329:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/waiting",function(){return t(121)}])},121:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return X}});var i,r,a,o,s,c=t(5893),l=t(2720),u=t(5409),d=t(7433),m=t(603),f=t(7294),p=t(1248),g=t(1163),h=t(7357),x=t(4184),j=t.n(x),_=t(6041),v=t(6322),Z=t(9280),k=t(7705),N=t(1586),W=t(8122),C=t(5861),y=t(9211),B=t(9496),b=t.n(B);function w(e){var n=e.reason;return(0,c.jsx)(h.Z,{"data-reason":n||null,className:j()(b().container,b().Empty),children:_.Z.build.isDev&&n&&(0,c.jsxs)(C.Z,{children:["WatingBlock Empty: ",n]})})}function S(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(b().container,b().WaitingStart),children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Запуск игры на сервере"}),(0,c.jsx)(y.Z,{className:b().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!n&&(0,c.jsx)(W.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function E(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(b().container,b().WaitingMulti),children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Ищем соперника"}),(0,c.jsx)(C.Z,{gutterBottom:!0,children:"Это может занять несколько минут."}),(0,c.jsx)(y.Z,{className:b().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!n&&(0,c.jsx)(W.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function M(e){var n=e.cancelWaiting,t=e.isWaiting;return(0,c.jsxs)(h.Z,{className:j()(b().container,b().WaitingSingle),children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Запуск одиночной игры"}),(0,c.jsx)(y.Z,{className:b().actions,spacing:2,direction:"row",justifyContent:"center",children:t&&!!n&&(0,c.jsx)(W.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Отменить"})})})]})}function T(e){var n=e.onSingleClick,t=e.goToStartPage;return(0,c.jsxs)(h.Z,{className:j()(b().container,b().WaitingFailed),children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Похоже, сейчас нет подходщих соперников"}),(0,c.jsx)(C.Z,{gutterBottom:!0,children:"Вы можете сыграть самостоятельно и подняться в рейтинге"}),(0,c.jsxs)(y.Z,{className:b().actions,spacing:2,direction:"row",justifyContent:"center",children:[!!n&&(0,c.jsx)(W.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Турнир для одного"})}),!!t&&(0,c.jsx)(W.Z,{className:"FixMuiButton",onClick:t,children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})]})]})}function R(e){var n=e.goToStartPage;return(0,c.jsxs)(h.Z,{className:j()(b().container,b().WasCancelled),children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"Старт игры был отменён"}),(0,c.jsx)(y.Z,{className:b().actions,spacing:2,direction:"row",justifyContent:"center",children:!!n&&(0,c.jsx)(W.Z,{className:"FixMuiButton",onClick:n,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]})}function P(e){var n=e.partnerName,t=e.gameMode,i=e.startGameDelaySec;return(0,c.jsxs)(h.Z,{className:j()(b().container,b().GameReady),children:[(0,c.jsx)(C.Z,{variant:"h5",gutterBottom:!0,children:"multi"===t?"Ура! Соперник нашёлся":"Всё готово!"}),(0,c.jsxs)(C.Z,{gutterBottom:!0,children:["Турнир",n&&" с игроком "+n,i?" начнется через "+i+"  секунды":" сейчас начнётся","..."]})]})}var G=t(7506),A=t.n(G),F=t(8356),L=t(1799),D=t(9396),O=t(3005),$=t(2171),I=t(6447),K=t(9724),V=t.n(K),z=t(3611),Q=t.n(z),U=(0,F.qC)((r=(i={errorClassName:Q().error,wrapperClassName:Q().wrapper}).wrapperClassName,a=i.errorClassName,s=void 0===(o=i.showErrorInWrapper)||o,function(e){return function(n){var t=(0,O.tP)(),i=(0,O.lO)(),o=(0,O.QL)(),l=(0,O.e1)()||i;f.useEffect(function(){l&&u.Am.error((0,$.VK)(l))},[l]);var d=(0,O.L8)(),m=(0,O.po)(),p=(0,O.RS)(),x=(0,g.useRouter)(),_=f.useCallback(function(){x.push("/")},[x]);return(0,c.jsxs)("div",{className:j()(r,V().container),children:[s&&l&&(0,c.jsxs)(h.Z,{className:j()(V().contentErrorContainer),m:2,children:[(0,c.jsx)(C.Z,{className:j()(a,V().contentError),m:2,children:(0,$.VK)(l)}),(0,c.jsx)(I.Z,{className:V().actions,spacing:2,direction:"row",m:2,justifyContent:"center",children:(0,c.jsx)(W.Z,{className:"FixMuiButton",onClick:_,variant:"contained",children:(0,c.jsx)("span",{className:"Text",children:"Начать сначала"})})})]}),!t&&(0,c.jsx)("div",{className:V().contentContainer,children:(0,c.jsx)(e,(0,D.Z)((0,L.Z)({},n),{error:l,isLoading:o,isWaiting:d,isStarted:m,isFailed:p}))}),(o||d)&&(0,c.jsx)(u.uY,{className:V().smallLoader,spinnerSize:"medium",show:!0}),(0,c.jsx)(u.uY,{className:V().loaderSplash,show:t,spinnerSize:"large",bg:"white",mode:"cover",fullSize:!0})]})}}))(function(e){var n=e.className,t=(0,p.oR)(),i=(0,v.TL)(),r=(0,g.useRouter)(),a=(0,v.u9)(),o=(0,v.gC)(),s=(0,v.aR)(),l=(0,v.QL)(),u=(0,v.L8)(),d=(0,v.vn)(),x=(0,v.po)(),W=(0,v.RS)(),C=(0,v.V5)(),y=!!o&&!!a,B=f.useCallback(function(){r.push("/")},[r]),b=f.useCallback(function(){r.push("/game")},[r]);f.useEffect(function(){y&&x&&("multi"===s?setTimeout(b,3e3):b())},[b,y,x,s]),f.useEffect(function(){y&&(0,N.Wh)(t)},[y,t]),f.useEffect(function(){y||_.Z.build.isDev||localStorage.getItem("gameParams:userName")||B()},[B,y,l,a,o,s]);var G=f.useCallback(function(){i(Z.Nw.setGameMode("single"))},[i]),F=(0,m.Z)(f.useState(!1),2),L=F[0],D=F[1],O=f.useCallback(function(){(0,v.Io)(),i((0,N.Mb)()),i(k.Nw.resetData()),D(!0)},[i]),$=f.useMemo(function(){if(!y)return(0,c.jsx)(w,{reason:"Not ready"});if(x)return(0,c.jsx)(P,{partnerName:C,gameMode:s});if(W)return(0,c.jsx)(T,{onSingleClick:G,goToStartPage:B});if(L)return(0,c.jsx)(R,{goToStartPage:B});if(!u)return(0,c.jsx)(w,{reason:"Not waiting"});if(!d)return(0,c.jsx)(S,{cancelWaiting:O,isWaiting:!0});if("single"===s)return(0,c.jsx)(M,{cancelWaiting:O,isWaiting:!0});else return(0,c.jsx)(E,{cancelWaiting:O,isWaiting:!0})},[O,s,B,G,W,y,x,u,d,C,L]);return(0,c.jsx)(h.Z,{className:j()(n,A().container),my:2,children:$})}),X=function(){var e=(0,d.d)("Старт игры");return(0,c.jsx)(l.Z,{title:e,children:(0,c.jsx)(u.ip,{flex:!0,flexVertical:!0,fullSizeFlexChild:!0,flexCenter:!0,children:(0,c.jsx)(U,{})})})}},7506:function(e){e.exports={container:"WaitingBlock_container__kQnxn"}},9496:function(e){e.exports={container:"WaitingBlockContent_container__AvQRT",Empty:"WaitingBlockContent_Empty___6Tvv",WaitingMulti:"WaitingBlockContent_WaitingMulti__IGH0K",WaitingSingle:"WaitingBlockContent_WaitingSingle__GOTv0",WaitingFailed:"WaitingBlockContent_WaitingFailed__X7Pa6",WasCancelled:"WaitingBlockContent_WasCancelled__HUBMl",GameReady:"WaitingBlockContent_GameReady__k3_SD",WaitingStart:"WaitingBlockContent_WaitingStart__6ah0V",DEBUG:"WaitingBlockContent_DEBUG__dXVaB",error:"WaitingBlockContent_error__mKOKG",actions:"WaitingBlockContent_actions__NE6aF"}},3611:function(e){e.exports={error:"WrappedWaitingBlock_error__M20nw",wrapper:"WrappedWaitingBlock_wrapper__2tBuN"}},9724:function(e){e.exports={container:"GameWaitingWrapper_container__YHwwm",contentError:"GameWaitingWrapper_contentError__nEGp2",contentContainer:"GameWaitingWrapper_contentContainer__B8_sf",smallLoader:"GameWaitingWrapper_smallLoader__7Kwnu",loaderSplash:"GameWaitingWrapper_loaderSplash__LjhsM"}},603:function(e,n,t){"use strict";function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e,n)||function(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,n)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[911,259,390,674,774,888,179],function(){return e(e.s=2329)}),_N_E=e.O()}]);
//# sourceMappingURL=waiting-dbb4597d9774c342.js.map